/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=i>>2,u=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(e):this.encodeByteArray(t(e),n)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],o=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==o||null==a||null==c)throw new r;const l=s<<2|o>>4;if(i.push(l),64!==a){const e=o<<4&240|a>>2;if(i.push(e),64!==c){const e=a<<6&192|c;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class r extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i=function(e){return function(e){const r=t(e);return n.encodeByteArray(r,!0)}(e).replace(/\./g,"")},s=function(e){try{return n.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},o=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&s(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},a=e=>{var t,n;return null===(n=null===(t=o())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},c=e=>{const t=a(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},l=()=>{var e;return null===(e=o())||void 0===e?void 0:e.config},u=e=>{var t;return null===(t=o())||void 0===t?void 0:t[`_${e}`]};class h{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function d(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[i(JSON.stringify({alg:"none",type:"JWT"})),i(JSON.stringify(o)),""].join(".")}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function g(){try{return"object"==typeof indexedDB}catch(e){return!1}}function m(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class y extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(w,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new y(r,o,n)}}const w=/\{\$([^}]+)}/g;function b(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(_(n)&&_(s)){if(!b(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function _(e){return null!==e&&"object"==typeof e}function E(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function I(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function T(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class x{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function S(){}const k=1e3,C=2,A=144e5,N=.5;function R(e,t=k,n=C){const r=t*Math.pow(n,e),i=Math.round(N*r*(Math.random()-.5)*2);return Math.min(A,r+i)}function O(e){return e&&e._delegate?e._delegate:e}class L{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const D="[DEFAULT]";class P{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new h;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:D})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=D){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=D){return this.instances.has(e)}getOptions(e=D){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===D?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=D){return this.component?this.component.multipleInstances?e:D:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class M{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const U=[];var F;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(F||(F={}));const V={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},j=F.INFO,B={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},q=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=B[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class z{constructor(e){this.name=e,this._logLevel=j,this._logHandler=q,this._userLogHandler=null,U.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in F))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?V[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...e),this._logHandler(this,F.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...e),this._logHandler(this,F.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,F.INFO,...e),this._logHandler(this,F.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,F.WARN,...e),this._logHandler(this,F.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...e),this._logHandler(this,F.ERROR,...e)}}const $=(e,t)=>t.some((t=>e instanceof t));let G,H;const K=new WeakMap,W=new WeakMap,Q=new WeakMap,X=new WeakMap,Y=new WeakMap;let J={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return W.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Q.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ee(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Z(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(te(this),e),ee(K.get(this))}:function(...e){return ee(t.apply(te(this),e))}:function(e,...n){const r=t.call(te(this),e,...n);return Q.set(r,e.sort?e.sort():[e]),ee(r)}:(e instanceof IDBTransaction&&function(e){if(W.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));W.set(e,t)}(e),$(e,G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,J):e);var t}function ee(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ee(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&K.set(t,e)})).catch((()=>{})),Y.set(t,e),t}(e);if(X.has(e))return X.get(e);const t=Z(e);return t!==e&&(X.set(e,t),Y.set(t,e)),t}const te=e=>Y.get(e);function ne(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=ee(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(ee(o.result),e.oldVersion,e.newVersion,ee(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const re=["get","getKey","getAll","getAllKeys","count"],ie=["put","add","delete","clear"],se=new Map;function oe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(se.get(t))return se.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ie.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!re.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return se.set(t,s),s}var ae;ae=J,J={...ae,get:(e,t,n)=>oe(e,t)||ae.get(e,t,n),has:(e,t)=>!!oe(e,t)||ae.has(e,t)};class ce{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const le="@firebase/app",ue="0.10.5",he=new z("@firebase/app"),de="@firebase/app-compat",fe="@firebase/analytics-compat",pe="@firebase/analytics",ge="@firebase/app-check-compat",me="@firebase/app-check",ye="@firebase/auth",ve="@firebase/auth-compat",we="@firebase/database",be="@firebase/database-compat",_e="@firebase/functions",Ee="@firebase/functions-compat",Ie="@firebase/installations",Te="@firebase/installations-compat",xe="@firebase/messaging",Se="@firebase/messaging-compat",ke="@firebase/performance",Ce="@firebase/performance-compat",Ae="@firebase/remote-config",Ne="@firebase/remote-config-compat",Re="@firebase/storage",Oe="@firebase/storage-compat",Le="@firebase/firestore",De="@firebase/vertexai-preview",Pe="@firebase/firestore-compat",Me="firebase",Ue="[DEFAULT]",Fe={[le]:"fire-core",[de]:"fire-core-compat",[pe]:"fire-analytics",[fe]:"fire-analytics-compat",[me]:"fire-app-check",[ge]:"fire-app-check-compat",[ye]:"fire-auth",[ve]:"fire-auth-compat",[we]:"fire-rtdb",[be]:"fire-rtdb-compat",[_e]:"fire-fn",[Ee]:"fire-fn-compat",[Ie]:"fire-iid",[Te]:"fire-iid-compat",[xe]:"fire-fcm",[Se]:"fire-fcm-compat",[ke]:"fire-perf",[Ce]:"fire-perf-compat",[Ae]:"fire-rc",[Ne]:"fire-rc-compat",[Re]:"fire-gcs",[Oe]:"fire-gcs-compat",[Le]:"fire-fst",[Pe]:"fire-fst-compat",[De]:"fire-vertex","fire-js":"fire-js",[Me]:"fire-js-all"},Ve=new Map,je=new Map,Be=new Map;function qe(e,t){try{e.container.addComponent(t)}catch(n){he.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ze(e){const t=e.name;if(Be.has(t))return he.debug(`There were multiple attempts to register component ${t}.`),!1;Be.set(t,e);for(const t of Ve.values())qe(t,e);for(const t of je.values())qe(t,e);return!0}function $e(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ge(e){return void 0!==e.settings}const He=new v("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ke{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new L("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw He.create("app-deleted",{appName:this._name})}}const We="10.12.2";function Qe(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:Ue,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw He.create("bad-app-name",{appName:String(i)});if(n||(n=l()),!n)throw He.create("no-options");const s=Ve.get(i);if(s){if(b(n,s.options)&&b(r,s.config))return s;throw He.create("duplicate-app",{appName:i})}const o=new M(i);for(const e of Be.values())o.addComponent(e);const a=new Ke(n,r,o);return Ve.set(i,a),a}function Xe(e=Ue){const t=Ve.get(e);if(!t&&e===Ue&&l())return Qe();if(!t)throw He.create("no-app",{appName:e});return t}function Ye(e,t,n){var r;let i=null!==(r=Fe[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void he.warn(e.join(" "))}ze(new L(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Je="firebase-heartbeat-database",Ze=1,et="firebase-heartbeat-store";let tt=null;function nt(){return tt||(tt=ne(Je,Ze,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(et)}catch(e){console.warn(e)}}}).catch((e=>{throw He.create("idb-open",{originalErrorMessage:e.message})}))),tt}async function rt(e,t){try{const n=(await nt()).transaction(et,"readwrite"),r=n.objectStore(et);await r.put(t,it(e)),await n.done}catch(e){if(e instanceof y)he.warn(e.message);else{const t=He.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});he.warn(t.message)}}}function it(e){return`${e.name}!${e.options.appId}`}class st{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new at(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ot();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ot(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ct(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ct(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=i(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function ot(){return(new Date).toISOString().substring(0,10)}class at{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!g()&&m().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await nt()).transaction(et),n=await t.objectStore(et).get(it(e));return await t.done,n}catch(e){if(e instanceof y)he.warn(e.message);else{const t=He.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});he.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return rt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return rt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ct(e){return i(JSON.stringify({version:2,heartbeats:e})).length}ze(new L("platform-logger",(e=>new ce(e)),"PRIVATE")),ze(new L("heartbeat",(e=>new st(e)),"PRIVATE")),Ye(le,ue,""),Ye(le,ue,"esm2017"),Ye("fire-js",""),Ye("firebase","10.12.2","app");const lt="@firebase/installations",ut="0.6.7",ht=1e4,dt=`w:${ut}`,ft="FIS_v2",pt="https://firebaseinstallations.googleapis.com/v1",gt=36e5,mt=new v("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function yt(e){return e instanceof y&&e.code.includes("request-failed")}function vt({projectId:e}){return`${pt}/projects/${e}/installations`}function wt(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function bt(e,t){const n=(await t.json()).error;return mt.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function _t({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function Et(e){const t=await e();return t.status>=500&&t.status<600?e():t}function It(e){return new Promise((t=>{setTimeout(t,e)}))}const Tt=/^[cdef][\w-]{21}$/,xt="";function St(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){var t;return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(e);return Tt.test(t)?t:xt}catch(e){return xt}}function kt(e){return`${e.appName}!${e.appId}`}const Ct=new Map;function At(e,t){const n=kt(e);Nt(n,t),function(e,t){const n=(!Rt&&"BroadcastChannel"in self&&(Rt=new BroadcastChannel("[Firebase] FID Change"),Rt.onmessage=e=>{Nt(e.data.key,e.data.fid)}),Rt);n&&n.postMessage({key:e,fid:t}),0===Ct.size&&Rt&&(Rt.close(),Rt=null)}(n,t)}function Nt(e,t){const n=Ct.get(e);if(n)for(const e of n)e(t)}let Rt=null;const Ot="firebase-installations-database",Lt=1,Dt="firebase-installations-store";let Pt=null;function Mt(){return Pt||(Pt=ne(Ot,Lt,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Dt)}})),Pt}async function Ut(e,t){const n=kt(e),r=(await Mt()).transaction(Dt,"readwrite"),i=r.objectStore(Dt),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||At(e,t.fid),t}async function Ft(e){const t=kt(e),n=(await Mt()).transaction(Dt,"readwrite");await n.objectStore(Dt).delete(t),await n.done}async function Vt(e,t){const n=kt(e),r=(await Mt()).transaction(Dt,"readwrite"),i=r.objectStore(Dt),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||At(e,o.fid),o}async function jt(e){let t;const n=await Vt(e.appConfig,(n=>{const r=function(e){return zt(e||{fid:St(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(mt.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=vt(e),i=_t(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={fid:n,authVersion:ft,appId:e.appId,sdkVersion:dt},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await Et((()=>fetch(r,a)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:wt(e.authToken)}}throw await bt("Create Installation",c)}(e,t);return Ut(e.appConfig,n)}catch(n){throw yt(n)&&409===n.customData.serverCode?await Ft(e.appConfig):await Ut(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Bt(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return n.fid===xt?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Bt(e){let t=await qt(e.appConfig);for(;1===t.registrationStatus;)await It(100),t=await qt(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await jt(e);return n||t}return t}function qt(e){return Vt(e,(e=>{if(!e)throw mt.create("installation-not-found");return zt(e)}))}function zt(e){return 1===(t=e).registrationStatus&&t.registrationTime+ht<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function $t({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${vt(e)}/${t}/authTokens:generate`}(e,n),i=function(e,{refreshToken:t}){const n=_t(e);return n.append("Authorization",function(e){return`${ft} ${e}`}(t)),n}(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:dt,appId:e.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await Et((()=>fetch(r,a)));if(c.ok)return wt(await c.json());throw await bt("Generate Auth Token",c)}async function Gt(e,t=!1){let n;const r=await Vt(e.appConfig,(r=>{if(!Kt(r))throw mt.create("not-registered");const i=r.authToken;if(!t&&(2===(s=i).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+gt}(s)))return r;var s;if(1===i.requestStatus)return n=async function(e,t){let n=await Ht(e.appConfig);for(;1===n.authToken.requestStatus;)await It(100),n=await Ht(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Gt(e,t):r}(e,t),r;{if(!navigator.onLine)throw mt.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await $t(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Ut(e.appConfig,r),n}catch(n){if(!yt(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Ut(e.appConfig,n)}else await Ft(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function Ht(e){return Vt(e,(e=>{if(!Kt(e))throw mt.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+ht<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function Kt(e){return void 0!==e&&2===e.registrationStatus}function Wt(e){return mt.create("missing-app-config-values",{valueName:e})}const Qt="installations";ze(new L(Qt,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Wt("App Configuration");if(!e.name)throw Wt("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Wt(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:$e(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ze(new L("installations-internal",(e=>{const t=$e(e.getProvider("app").getImmediate(),Qt).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await jt(t);return r?r.catch(console.error):Gt(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await jt(e);t&&await t}(n),(await Gt(n,t)).token}(t,e)}}),"PRIVATE")),Ye(lt,ut),Ye(lt,ut,"esm2017");const Xt="analytics",Yt="firebase_id",Jt="origin",Zt=6e4,en="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tn="https://www.googletagmanager.com/gtag/js",nn=new z("@firebase/analytics"),rn=new v("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function sn(e){if(!e.startsWith(tn)){const t=rn.create("invalid-gtag-resource",{gtagURL:e});return nn.warn(t.message),""}return e}function on(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const an=30,cn=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ln(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function un(e,t=cn,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw rn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw rn.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new dn;return setTimeout((async()=>{a.abort()}),void 0!==n?n:Zt),hn({appId:r,apiKey:i,measurementId:s},o,a,t)}async function hn(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=cn){var s;const{appId:o,measurementId:a}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(rn.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){if(a)return nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:o,measurementId:a};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:ln(r)},s=en.replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw rn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return i.deleteThrottleMetadata(o),t}catch(t){const c=t;if(!function(e){if(!(e instanceof y&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c)){if(i.deleteThrottleMetadata(o),a)return nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw t}const l=503===Number(null===(s=null==c?void 0:c.customData)||void 0===s?void 0:s.httpStatus)?R(n,i.intervalMillis,an):R(n,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,u),nn.debug(`Calling attemptFetch again in ${l} millis`),hn(e,u,r,i)}}class dn{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let fn,pn;async function gn(e,t,n,r,i,s,o){var a;const c=un(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&nn.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>nn.error(e))),t.push(c);const l=async function(){if(!g())return nn.warn(rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await m()}catch(e){return nn.warn(rn.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,h]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(tn)&&n.src.includes(e))return n;return null})(s)||function(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",t)),n}(0,{createScriptURL:sn}),r=document.createElement("script"),i=`${tn}?l=${e}&id=${t}`;r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,u.measurementId),pn&&(i("consent","default",pn),pn=void 0),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d[Jt]="firebase",d.update=!0,null!=h&&(d[Yt]=h),i("config",u.measurementId,d),fn&&(i("set",fn),fn=void 0),u.measurementId}class mn{constructor(e){this.app=e}_delete(){return delete yn[this.app.options.appId],Promise.resolve()}}let yn={},vn=[];const wn={};let bn,_n,En="dataLayer",In=!1;function Tn(e,t,n){!function(){const e=[];if(p()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=rn.create("invalid-analytics-context",{errorInfo:t});nn.warn(n.message)}}();const r=e.options.appId;if(!r)throw rn.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw rn.create("no-api-key");nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=yn[r])throw rn.create("already-exists",{id:r});if(!In){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(En);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function(e,t,n,r){return async function(i,...s){try{if("event"===i){const[r,i]=s;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await on(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(e){nn.error(e)}}(e,t,n,r,i)}else if("config"===i){const[i,o]=s;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await on(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(e){nn.error(e)}e("config",i,s)}(e,t,n,r,i,o)}else if("consent"===i){const[t,n]=s;e("consent",t,n)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)}else e(i,...s)}catch(e){nn.error(e)}}}(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(yn,vn,wn,En,"gtag");_n=e,bn=t,In=!0}return yn[r]=gn(e,vn,wn,t,bn,En,n),new mn(e)}const xn="@firebase/analytics",Sn="0.10.4";function kn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}ze(new L(Xt,((e,{options:t})=>Tn(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),ze(new L("analytics-internal",(function(e){try{const t=e.getProvider(Xt).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=O(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(_n,yn[e.app.options.appId],t,n,r).catch((e=>nn.error(e)))}(t,e,n,r)}}catch(e){throw rn.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Ye(xn,Sn),Ye(xn,Sn,"esm2017"),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const Cn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},An=new v("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nn=new z("@firebase/auth");function Rn(e,...t){Nn.logLevel<=F.ERROR&&Nn.error(`Auth (${We}): ${e}`,...t)}function On(e,...t){throw Mn(e,...t)}function Ln(e,...t){return Mn(e,...t)}function Dn(e,t,n){const r=Object.assign(Object.assign({},Cn()),{[t]:n});return new v("auth","Firebase",r).create(t,{appName:e.name})}function Pn(e){return Dn(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mn(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return An.create(e,...t)}function Un(e,t,...n){if(!e)throw Mn(t,...n)}function Fn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Rn(t),new Error(t)}function Vn(e,t){e||Fn(t)}function jn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Bn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class qn{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Bn()||"https:"===Bn()||p()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function zn(e,t){Vn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class $n{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Hn=new qn(3e4,6e4);function Kn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Wn(e,t,n,r,i={}){return Qn(e,i,(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=E(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),$n.fetch()(Yn(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Qn(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Gn),t);try{const t=new Zn(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw er(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw er(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw er(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw er(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Dn(e,a,o);On(e,a)}}catch(t){if(t instanceof y)throw t;On(e,"network-request-failed",{message:String(t)})}}async function Xn(e,t,n,r,i={}){const s=await Wn(e,t,n,r,i);return"mfaPendingCredential"in s&&On(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Yn(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?zn(e.config,i):`${e.config.apiScheme}://${i}`}function Jn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zn{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ln(this.auth,"network-request-failed"))),Hn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function er(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ln(e,t,r);return i.customData._tokenResponse=n,i}function tr(e){return void 0!==e&&void 0!==e.enterprise}class nr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Jn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function rr(e,t){return Wn(e,"POST","/v1/accounts:lookup",t)}function ir(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function sr(e){return 1e3*Number(e)}function or(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Rn("JWT malformed, contained fewer than 3 sections"),null;try{const e=s(n);return e?JSON.parse(e):(Rn("Failed to decode base64 JWT payload"),null)}catch(e){return Rn("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function ar(e){const t=or(e);return Un(t,"internal-error"),Un(void 0!==t.exp,"internal-error"),Un(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function cr(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof y&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class lr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class ur{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ir(this.lastLoginAt),this.creationTime=ir(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await cr(e,rr(n,{idToken:r}));Un(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?dr(s.providerUserInfo):[],a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ur(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function dr(e){return e.map((e=>{var{providerId:t}=e,n=kn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class fr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Un(e.idToken,"internal-error"),Un(void 0!==e.idToken,"internal-error"),Un(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):ar(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Un(0!==e.length,"internal-error");const t=ar(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Un(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Qn(e,{},(async()=>{const n=E({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Yn(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",$n.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new fr;return n&&(Un("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Un("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Un("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fr,this.toJSON())}_performRefresh(){return Fn("not implemented")}}function pr(e,t){Un("string"==typeof e||void 0===e,"internal-error",{appName:t})}class gr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=kn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ur(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await cr(this,this.stsTokenManager.getToken(this.auth,e));return Un(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=O(e),r=await n.getIdToken(t),i=or(r);Un(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ir(sr(i.auth_time)),issuedAtTime:ir(sr(i.iat)),expirationTime:ir(sr(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=O(e);await hr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Un(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Un(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await hr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ge(this.auth.app))return Promise.reject(Pn(this.auth));const e=await this.getIdToken();return await cr(this,async function(e,t){return Wn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;Un(v&&E,e,"internal-error");const I=fr.fromJSON(this.name,E);Un("string"==typeof v,e,"internal-error"),pr(u,e.name),pr(h,e.name),Un("boolean"==typeof w,e,"internal-error"),Un("boolean"==typeof b,e,"internal-error"),pr(d,e.name),pr(f,e.name),pr(p,e.name),pr(g,e.name),pr(m,e.name),pr(y,e.name);const T=new gr({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(T.providerData=_.map((e=>Object.assign({},e)))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(e,t,n=!1){const r=new fr;r.updateFromServerResponse(t);const i=new gr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await hr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Un(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?dr(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),o=new fr;o.updateFromIdToken(n);const a=new gr({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ur(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(a,c),a}}const mr=new Map;function yr(e){Vn(e instanceof Function,"Expected a class definition");let t=mr.get(e);return t?(Vn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mr.set(e,t),t)}class vr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vr.type="NONE";const wr=vr;function br(e,t,n){return`firebase:${e}:${t}:${n}`}class _r{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=br(this.userKey,r.apiKey,i),this.fullPersistenceKey=br("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?gr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new _r(yr(wr),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||yr(wr);const s=br(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=gr._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new _r(i,e,n)):new _r(i,e,n)}}function Er(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Sr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ir(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Cr(t))return"Blackberry";if(Ar(t))return"Webos";if(Tr(t))return"Safari";if((t.includes("chrome/")||xr(t))&&!t.includes("edge/"))return"Chrome";if(kr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Ir(e=f()){return/firefox\//i.test(e)}function Tr(e=f()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function xr(e=f()){return/crios\//i.test(e)}function Sr(e=f()){return/iemobile/i.test(e)}function kr(e=f()){return/android/i.test(e)}function Cr(e=f()){return/blackberry/i.test(e)}function Ar(e=f()){return/webos/i.test(e)}function Nr(e=f()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Rr(e=f()){return Nr(e)||kr(e)||Ar(e)||Cr(e)||/windows phone/i.test(e)||Sr(e)}function Or(e,t=[]){let n;switch(e){case"Browser":n=Er(f());break;case"Worker":n=`${Er(f())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${We}/${r}`}class Lr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Dr{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Pr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ur(this),this.idTokenSubscription=new Ur(this),this.beforeStateQueue=new Lr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=An,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yr(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await _r.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await rr(this,{idToken:e}),n=await gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ge(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Un(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hr(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ge(this.app))return Promise.reject(Pn(this));const t=e?O(e):null;return t&&Un(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Un(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Ge(this.app)?Promise.reject(Pn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ge(this.app)?Promise.reject(Pn(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(yr(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Wn(e,"GET","/v2/passwordPolicy",Kn(e,t))}(this),t=new Dr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new v("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Wn(e,"POST","/v2/accounts:revokeToken",Kn(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yr(e)||this._popupRedirectResolver;Un(t,this,"argument-error"),this.redirectPersistenceManager=await _r.create(this,[yr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Un(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Un(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Or(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Nn.logLevel<=F.WARN&&Nn.warn(`Auth (${We}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Mr(e){return O(e)}class Ur{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new x(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Un(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Fr={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vr(e){return Fr.loadJS(e)}function jr(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Br{constructor(e){this.type="recaptcha-enterprise",this.auth=Mr(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;tr(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return Wn(e,"GET","/v2/recaptchaConfig",Kn(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new nr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&tr(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Fr.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Vr(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function qr(e,t,n,r=!1){const i=new Br(e);let s;try{s=await i.verify(n)}catch(e){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function zr(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await qr(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await qr(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function $r(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Hr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,t){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}async function Kr(e,t){return Wn(e,"POST","/v1/accounts:signUp",t)}async function Wr(e,t){return Xn(e,"POST","/v1/accounts:signInWithPassword",Kn(e,t))}class Qr extends Hr{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Qr(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Qr(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return zr(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Wr);case"emailLink":return async function(e,t){return Xn(e,"POST","/v1/accounts:signInWithEmailLink",Kn(e,t))}(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return zr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Kr);case"emailLink":return async function(e,t){return Xn(e,"POST","/v1/accounts:signInWithEmailLink",Kn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Xr(e,t){return Xn(e,"POST","/v1/accounts:signInWithIdp",Kn(e,t))}class Yr extends Hr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):On("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=kn(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Yr(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Xr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Xr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=E(t)}return e}}const Jr={USER_NOT_FOUND:"user-not-found"};class Zr extends Hr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Zr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Zr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Xn(e,"POST","/v1/accounts:signInWithPhoneNumber",Kn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Xn(e,"POST","/v1/accounts:signInWithPhoneNumber",Kn(e,t));if(n.temporaryProof)throw er(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Xn(e,"POST","/v1/accounts:signInWithPhoneNumber",Kn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Jr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Zr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ei{constructor(e){var t,n,r,i,s,o;const a=I(T(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Un(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=I(T(e)).link,n=t?I(T(t)).deep_link_id:null,r=I(T(e)).deep_link_id;return(r?I(T(r)).link:null)||r||n||t||e}(e);try{return new ei(t)}catch(e){return null}}}class ti{constructor(){this.providerId=ti.PROVIDER_ID}static credential(e,t){return Qr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ei.parseLink(t);return Un(n,"argument-error"),Qr._fromEmailAndCode(e,n.code,n.tenantId)}}ti.PROVIDER_ID="password",ti.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ti.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ni{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ri extends ni{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ii extends ri{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return ii.credential(e.oauthAccessToken)}catch(e){return null}}}ii.FACEBOOK_SIGN_IN_METHOD="facebook.com",ii.PROVIDER_ID="facebook.com";class si extends ri{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Yr._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return si.credential(t,n)}catch(e){return null}}}si.GOOGLE_SIGN_IN_METHOD="google.com",si.PROVIDER_ID="google.com";class oi extends ri{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch(e){return null}}}oi.GITHUB_SIGN_IN_METHOD="github.com",oi.PROVIDER_ID="github.com";class ai extends ri{constructor(){super("twitter.com")}static credential(e,t){return Yr._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ai.credential(t,n)}catch(e){return null}}}async function ci(e,t){return Xn(e,"POST","/v1/accounts:signUp",Kn(e,t))}ai.TWITTER_SIGN_IN_METHOD="twitter.com",ai.PROVIDER_ID="twitter.com";class li{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await gr._fromIdTokenResponse(e,n,r),s=ui(n);return new li({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ui(n);return new li({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ui(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class hi extends y{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,hi.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new hi(e,t,n,r)}}function di(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw hi._fromErrorAndOperation(e,n,t,r);throw n}))}async function fi(e,t,n=!1){if(Ge(e.app))return Promise.reject(Pn(e));const r="signIn",i=await di(e,r,t),s=await li._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function pi(e){const t=Mr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function gi(e,t,n){if(Ge(e.app))return Promise.reject(Pn(e));const r=Mr(e),i=zr(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ci),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&pi(e),t})),o=await li._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function mi(e,t,n){return Ge(e.app)?Promise.reject(Pn(e)):async function(e,t){return fi(Mr(e),t)}(O(e),ti.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&pi(e),t}))}new WeakMap;const yi="__sak";class vi{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yi,"1"),this.storage.removeItem(yi),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class wi extends vi{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=f();return Tr(e)||Nr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Rr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);!function(){const e=f();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||i===e.newValue||e.newValue===e.oldValue?r():setTimeout(r,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}wi.type="LOCAL";const bi=wi;class _i extends vi{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_i.type="SESSION";const Ei=_i;class Ii{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ii(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ti(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Ii.receivers=[];class xi{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Ti("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Si(){return window}function ki(){return void 0!==Si().WorkerGlobalScope&&"function"==typeof Si().importScripts}const Ci="firebaseLocalStorageDb",Ai="firebaseLocalStorage",Ni="fbase_key";class Ri{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Oi(e,t){return e.transaction([Ai],t?"readwrite":"readonly").objectStore(Ai)}function Li(){const e=indexedDB.open(Ci,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ai,{keyPath:Ni})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ai)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ci);return new Ri(e).toPromise()}(),t(await Li()))}))}))}async function Di(e,t,n){const r=Oi(e,!0).put({[Ni]:t,value:n});return new Ri(r).toPromise()}function Pi(e,t){const n=Oi(e,!0).delete(t);return new Ri(n).toPromise()}class Mi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Li()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ki()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ii._getInstance(ki()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new xi(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Li();return await Di(e,yi,"1"),await Pi(e,yi),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Di(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Oi(e,!1).get(t),r=await new Ri(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Pi(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Oi(e,!1).getAll();return new Ri(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Mi.type="LOCAL";const Ui=Mi;jr("rcb"),new qn(3e4,6e4);class Fi{constructor(e){this.providerId=Fi.PROVIDER_ID,this.auth=Mr(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var r;const i=await n.verify();try{let s;if(Un("string"==typeof i,e,"argument-error"),Un("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Un("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Wn(e,"POST","/v2/accounts/mfaEnrollment:start",Kn(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Un("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Un(n,e,"missing-multi-factor-info");const o=await function(e,t){return Wn(e,"POST","/v2/accounts/mfaSignIn:start",Kn(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Wn(e,"POST","/v1/accounts:sendVerificationCode",Kn(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}(this.auth,e,O(t))}static credential(e,t){return Zr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Fi.credentialFromTaggedObject(t)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Zr._fromTokenResponse(t,n):null}}Fi.PROVIDER_ID="phone",Fi.PHONE_SIGN_IN_METHOD="phone";class Vi extends Hr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ji(e){return fi(e.auth,new Vi(e),e.bypassAuthState)}function Bi(e){const{auth:t,user:n}=e;return Un(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e;if(Ge(r.app))return Promise.reject(Pn(r));const i="reauthenticate";try{const s=await cr(e,di(r,i,t,e),n);Un(s.idToken,r,"internal-error");const o=or(s.idToken);Un(o,r,"internal-error");const{sub:a}=o;return Un(e.uid===a,r,"user-mismatch"),li._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&On(r,"user-mismatch"),e}}(n,new Vi(e),e.bypassAuthState)}async function qi(e){const{auth:t,user:n}=e;return Un(n,t,"internal-error"),async function(e,t,n=!1){const r=await cr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return li._forOperation(e,"link",r)}(n,new Vi(e),e.bypassAuthState)}class zi{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ji;case"linkViaPopup":case"linkViaRedirect":return qi;case"reauthViaPopup":case"reauthViaRedirect":return Bi;default:On(this.auth,"internal-error")}}resolve(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $i=new qn(2e3,1e4);class Gi extends zi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Gi.currentPopupAction&&Gi.currentPopupAction.cancel(),Gi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Un(e,this.auth,"internal-error"),e}async onExecution(){Vn(1===this.filter.length,"Popup operations only handle one event");const e=Ti();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ln(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,$i.get())};e()}}Gi.currentPopupAction=null;const Hi="pendingRedirect",Ki=new Map;class Wi extends zi{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ki.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return br(Hi,e.config.apiKey,e.name)}(t),r=function(e){return yr(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ki.set(this.auth._key(),e)}return this.bypassAuthState||Ki.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Qi(e,t){Ki.set(e._key(),t)}async function Xi(e,t,n=!1){if(Ge(e.app))return Promise.reject(Pn(e));const r=Mr(e),i=function(e,t){return t?yr(t):(Un(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=new Wi(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Yi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Zi(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ln(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ji(e))}saveEventToCache(e){this.cachedEventUids.add(Ji(e)),this.lastProcessedEventTime=Date.now()}}function Ji(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Zi({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const es=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ts=/^https?/;function ns(e){const t=jn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ts.test(n))return!1;if(es.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const rs=new qn(3e4,6e4);function is(){const e=Si().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function ss(e){return new Promise(((t,n)=>{var r,i,s;function o(){is(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{is(),n(Ln(e,"network-request-failed"))},timeout:rs.get()})}if(null===(i=null===(r=Si().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Si().gapi)||void 0===s?void 0:s.load)){const t=jr("iframefcb");return Si()[t]=()=>{gapi.load?o():n(Ln(e,"network-request-failed"))},Vr(`${Fr.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw os=null,e}))}let os=null;const as=new qn(5e3,15e3),cs="__/auth/iframe",ls="emulator/auth/iframe",us={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ds(e){const t=e.config;Un(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?zn(t,ls):`https://${e.config.authDomain}/${cs}`,r={apiKey:t.apiKey,appName:e.name,v:We},i=hs.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${E(r).slice(1)}`}const fs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ps{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const gs=encodeURIComponent("fac");async function ms(e,t,n,r,i,s){Un(e.config.authDomain,e,"auth-domain-config-required"),Un(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:We,eventId:i};if(t instanceof ni){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof ri){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];const c=await e._getAppCheckToken(),l=c?`#${gs}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?zn(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${E(a).slice(1)}${l}`}const ys="webStorageSupport",vs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ei,this._completeRedirectFn=Xi,this._overrideRedirectResult=Qi}async _openPopup(e,t,n,r){var i;return Vn(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},fs),{width:r.toString(),height:i.toString(),top:s,left:o}),l=f().toLowerCase();n&&(a=xr(l)?"_blank":n),Ir(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=f()){var t;return Nr(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ps(null);const h=window.open(t||"",a,u);Un(h,e,"popup-blocked");try{h.focus()}catch(e){}return new ps(h)}(e,await ms(e,t,n,jn(),r),Ti())}async _openRedirect(e,t,n,r){return await this._originValidation(e),i=await ms(e,t,n,jn(),r),Si().location.href=i,new Promise((()=>{}));var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Vn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return os=os||ss(e),os}(e),n=Si().gapi;return Un(n,e,"internal-error"),t.open({where:document.body,url:ds(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:us,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ln(e,"network-request-failed"),s=Si().setTimeout((()=>{r(i)}),as.get());function o(){Si().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Yi(e);return t.register("authEvent",(t=>(Un(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ys,{type:ys},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[ys];void 0!==i&&t(!!i),On(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Wn(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(ns(e))return}catch(e){}On(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Rr()||Tr()||Nr()}};var ws="@firebase/auth",bs="1.7.4";class _s{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Un(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Es=u("authIdTokenMaxAge")||300;let Is=null;var Ts;Fr={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ln("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ts="Browser",ze(new L("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Un(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:Ts,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Or(Ts)},c=new Pr(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yr);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(c,t),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),ze(new L("auth-internal",(e=>(e=>new _s(e))(Mr(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ye(ws,bs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ts)),Ye(ws,bs,"esm2017");const xs="firebasestorage.googleapis.com",Ss="storageBucket";class ks extends y{constructor(e,t,n=0){super(Ns(e),`Firebase Storage: ${t} (${Ns(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ks.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ns(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Cs,As;function Ns(e){return"storage/"+e}function Rs(){return new ks(Cs.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Os(e){return new ks(Cs.INVALID_ARGUMENT,e)}function Ls(){return new ks(Cs.APP_DELETED,"The Firebase app was deleted.")}function Ds(e,t){return new ks(Cs.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ps(e){throw new ks(Cs.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Cs||(Cs={}));class Ms{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ms.makeFromUrl(e,t)}catch(t){return new Ms(e,"")}if(""===n.path)return n;throw r=e,new ks(Cs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===xs?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let t=0;t<a.length;t++){const r=a[t],i=r.regex.exec(e);if(i){const e=i[r.indices.bucket];let t=i[r.indices.path];t||(t=""),n=new Ms(e,t),r.postModify(n);break}}if(null==n)throw function(e){return new ks(Cs.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Us{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Fs(e){return"string"==typeof e||e instanceof String}function Vs(e){return js()&&e instanceof Blob}function js(){return"undefined"!=typeof Blob}function Bs(e,t,n,r){if(r<t)throw Os(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Os(`Invalid value for '${e}'. Expected ${n} or less.`)}function qs(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function zs(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(As||(As={}));class $s{constructor(e,t,n,r,i,s,o,a,c,l,u,h=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0===e?n():n(e)}catch(e){r(e)}else if(null!==i){const e=Rs();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else t.canceled?r(this.appDelete_?Ls():new ks(Cs.CANCELED,"User canceled the upload/download.")):r(new ks(Cs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new Gs(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(...e){l||(l=!0,t.apply(null,e))}function h(t){i=setTimeout((()=>{i=null,e(f,c())}),t)}function d(){s&&clearTimeout(s)}function f(e,...t){if(l)return void d();if(e)return d(),void u.call(null,e,...t);if(c()||o)return d(),void u.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let p=!1;function g(e){p||(p=!0,d(),l||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(((e,t)=>{if(t)return void e(!1,new Gs(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===As.NO_ERROR,i=n.getStatus();if(!t||function(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===As.ABORT;return void e(!1,new Gs(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Gs(s,n))}))}),e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Gs{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Hs(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ks(...e){const t=Hs();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(js())return new Blob(e);throw new ks(Cs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ws={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qs{constructor(e,t){this.data=e,this.contentType=t||null}}function Xs(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Ys(e,t){switch(e){case Ws.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Ds(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case Ws.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r)throw Ds(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function(e){if("undefined"==typeof atob)throw new ks(Cs.UNSUPPORTED_ENVIRONMENT,"base-64 is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.");return atob(e)}(t)}catch(t){if(t.message.includes("polyfill"))throw t;throw Ds(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);return r}class Js{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Ds(Ws.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;var r,i;null!=n&&(this.base64=(i=";base64",(r=n).length>=7&&r.substring(r.length-7)===i),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Zs{constructor(e,t){let n=0,r="";Vs(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Vs(this.data_)){const s=(n=this.data_,r=e,i=t,n.webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null);return null===s?null:new Zs(s)}var n,r,i;{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Zs(n,!0)}}static getBlob(...e){if(js()){const t=e.map((e=>e instanceof Zs?e.data_:e));return new Zs(Ks.apply(null,t))}{const t=e.map((e=>Fs(e)?function(e,t){switch(e){case Ws.RAW:return new Qs(Xs(t));case Ws.BASE64:case Ws.BASE64URL:return new Qs(Ys(e,t));case Ws.DATA_URL:return new Qs(function(e){const t=new Js(e);return t.base64?Ys(Ws.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(e){throw Ds(Ws.DATA_URL,"Malformed data URL.")}return Xs(t)}(t.rest)}(t),new Js(t).contentType)}throw Rs()}(Ws.RAW,e).data:e.data_));let n=0;t.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return t.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Zs(r,!0)}}uploadData(){return this.data_}}function eo(e){let t;try{t=JSON.parse(e)}catch(e){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t;var n}function to(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function no(e,t){return t}class ro{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||no}}let io=null;function so(){if(io)return io;const e=[];e.push(new ro("bucket")),e.push(new ro("generation")),e.push(new ro("metageneration")),e.push(new ro("name","fullPath",!0));const t=new ro("name");t.xform=function(e,t){return function(e){return!Fs(e)||e.length<2?e:to(e)}(t)},e.push(t);const n=new ro("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ro("timeCreated")),e.push(new ro("updated")),e.push(new ro("md5Hash",null,!0)),e.push(new ro("cacheControl",null,!0)),e.push(new ro("contentDisposition",null,!0)),e.push(new ro("contentEncoding",null,!0)),e.push(new ro("contentLanguage",null,!0)),e.push(new ro("contentType",null,!0)),e.push(new ro("metadata","customMetadata",!0)),io=e,io}function oo(e,t,n){const r=eo(t);return null===r?null:function(e,t,n){const r={type:"file"},i=n.length;for(let e=0;e<i;e++){const i=n[e];r[i.local]=i.xform(r,t[i.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Ms(n,r);return t._makeStorageReference(i)}})}(r,e),r}(e,r,n)}class ao{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function co(e){if(!e)throw Rs()}function lo(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new ks(Cs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new ks(Cs.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new ks(Cs.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new ks(Cs.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function uo(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const c=function(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}(t,r,i),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+function(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}(c,n)+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=Zs.getBlob(l,r,u);if(null===h)throw new ks(Cs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.");const d={name:c.fullPath},f=qs(s,e.host,e._protocol),p=e.maxUploadRetryTime,g=new ao(f,"POST",function(e,t){return function(n,r){const i=oo(e,r,t);return co(null!==i),i}}(e,n),p);return g.urlParams=d,g.headers=o,g.body=h.uploadData(),g.errorHandler=lo(t),g}let ho=null;class fo{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=As.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=As.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=As.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Ps("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const e in r)r.hasOwnProperty(e)&&this.xhr_.setRequestHeader(e,r[e].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ps("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ps("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Ps("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ps("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class po extends fo{initXhr(){this.xhr_.responseType="text"}}function go(){return ho?ho():new po}class mo{constructor(e,t){this._service=e,this._location=t instanceof Ms?t:Ms.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new mo(e,t)}get root(){const e=new Ms(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return to(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Ms(this._location.bucket,e);return new mo(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new ks(Cs.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function yo(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=qs(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new ao(r,"GET",function(e,t){return function(n,r){const i=oo(e,r,t);return co(null!==i),function(e,t,n,r){const i=eo(t);if(null===i)return null;if(!Fs(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return qs("/b/"+o(i)+"/o/"+o(s),n,r)+zs({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}(e,n),i);return s.errorHandler=function(e){const t=lo(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new ks(Cs.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}(t),s}(e.storage,e._location,so());return e.storage.makeRequestWithTokens(t,go).then((e=>{if(null===e)throw new ks(Cs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function vo(e,t){if(e instanceof bo){const n=e;if(null==n._bucket)throw new ks(Cs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ss+"' property when initializing the app?");const r=new mo(n,n._bucket);return null!=t?vo(r,t):r}return void 0!==t?function(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Ms(e._location.bucket,n);return new mo(e.storage,r)}(e,t):e}function wo(e,t){const n=null==t?void 0:t[Ss];return null==n?null:Ms.makeFromBucketSpec(n,e)}class bo{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=xs,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Ms.makeFromBucketSpec(r,this._host):wo(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Ms.makeFromBucketSpec(this._url,e):this._bucket=wo(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Bs("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Bs("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mo(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new Us(Ls());{const s=function(e,t,n,r,i,s,o=!0){const a=zs(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new $s(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const _o="@firebase/storage",Eo="0.12.5",Io="storage";function To(e,t,n){return function(e,t,n){e._throwIfRoot("uploadBytes");const r=uo(e.storage,e._location,so(),new Zs(t,!0),n);return e.storage.makeRequestWithTokens(r,go).then((t=>({metadata:t,ref:e})))}(e=O(e),t,n)}function xo(e){return yo(e=O(e))}function So(e,t){return function(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof bo)return new mo(e,t);throw Os("To use ref(service, url), the first argument must be a Storage instance.")}return vo(e,t)}(e=O(e),t)}ze(new L(Io,(function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new bo(n,r,i,t,We)}),"PUBLIC").setMultipleInstances(!0)),Ye(_o,Eo,""),Ye(_o,Eo,"esm2017");var ko,Co,Ao="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},No={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=function(e){return new r([0|e],0>e?-1:0)}(e)}(e):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),c=s(1),l=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(c)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var l=s.add(r);0>=l.l(e)&&(i=i.add(n),s=l),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),l=(s=o(n)).j(t);h(l)||0<l.l(e);)l=(s=o(n-=r)).j(t);u(s)&&(s=c),i=i.add(s),e=f(e,l)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(l)&&0>e.l(l))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var c=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=c*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=c*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Co=No.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var c=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+c),n);8>c?(c=o(Math.pow(n,c)),i=i.j(c).add(o(l))):i=(i=i.j(r)).add(o(l))}return i},ko=No.Integer=r}).apply(void 0!==Ao?Ao:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ro,Oo,Lo,Do,Po,Mo,Uo,Fo,Vo,jo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Bo={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof jo&&jo];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(0,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function l(e,t,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(s(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=!(-1==g().indexOf("Gecko")||-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge")||-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE")||-1!=g().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function I(e){i.setTimeout((()=>{throw e}),0)}function T(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var x=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new S),(e=>e.reset()));class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let k,C=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=x.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);k=()=>{e.then(R)}};var R=()=>{for(var e;e=T();){try{e.h.call(e.g)}catch(e){I(e)}var t=x;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function O(){this.s=this.s,this.C=this.C}function L(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},L.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(e){}return e}();function P(e,t){if(L.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&P.aa.h.call(this)}}h(P,L);var M={2:"touch",3:"pen",4:"mouse"};P.prototype.h=function(){P.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function j(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(j(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function z(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=z(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new V(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),G={};function H(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=te(n),e&&e[U]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,c=Z(e);if(c||(e[$]=c=new B(e)),(n=c.add(t,n,r,a,s)).proxy)return n;if(r=function(){const e=J;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[U]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[U]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=z(s=e.g[t],n,r,i))&&(j(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=z(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[U])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[$]=null)):j(e)}}}function Y(e){return e in G?G[e]:G[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new P(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[$])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"==typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){O.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new L(t,e);else if(t instanceof L)t.target=t.target||e;else{var i=t;_(t=new L(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.fa&&q(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"==typeof e)n&&(e=l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,O),ne.prototype[U]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)j(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends O{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(e){O.call(this),this.h=e,this.g={}}h(ce,O);var le=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}ce.prototype.N=function(){ce.aa.N.call(this),ue(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){L.call(this,"d")}function we(){L.call(this,"c")}h(ve,L),h(we,L);var be={},_e=null;function Ee(){return _e=_e||new ne}function Ie(e){L.call(this,be.La,e)}function Te(e){const t=Ee();re(t,new Ie(t))}function xe(e,t){L.call(this,be.STAT_EVENT,e),this.stat=t}function Se(e){const t=Ee();re(t,new xe(t,e))}function ke(e,t){L.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function Ne(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",h(Ie,L),be.STAT_EVENT="statevent",h(xe,L),be.Ma="timingevent",h(ke,L),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var Re,Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ce(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Re=new De;var Ue={},Fe={};function Ve(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,je(e,null)}function je(e,t){e.F=Date.now(),ze(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),xt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(l(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(le[0]=i.toString()),i=le);for(var s=0;s<i.length;s++){var o=H(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Te(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Ue:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function ze(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(l(e.ba,e),t)}function Ge(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||cn(e.j,e)}function Ke(e){Ge(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Xt(n)}rn(n),Se(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(l(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(e){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const t=l[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=l[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,c=r.L;c&&(a.I=c),a.B&&(Ge(a),ze(a)),r.g=o}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=l[0]&&"close"!=l[0]||un(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?un(n,7):Qt(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}Te()}catch(e){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Gt(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const d=Gt(this.g);var t=this.g.Ba();if(this.g.Z(),!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=d||7==t||Te(),Ge(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=Ht(this.g);e="";var s=r.length,o=4==Gt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ke(this),He(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(c)){var u=c;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),Ke(this),He(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=qe(this,a),e==Fe){4==d&&(this.s=4,Se(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ue){this.s=4,Se(15),Ne(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),We(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Se(11))}}else Ne(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),He(this)}else Ne(this.i,this.l,a,null),We(this,a);4==d&&Ke(this),this.o&&!this.J&&(4==d?cn(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&2<=Gt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),Ke(this),He(this)}}}catch(e){}},Pe.prototype.cancel=function(){this.J=!0,Ke(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Te(),Se(17)),Ke(this),this.s=2,He(this)):$e(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,e=i.PerformanceNavigationTiming?0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,ct(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),lt(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),ct(this,t[4]),this.l=dt(t[5]||"",!0),lt(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ct(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function lt(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(It(this,t),xt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new _t(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var gt,mt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function It(e,t){Et(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return Et(e),t=St(e,t),e.g.has(t)}function xt(e,t,n){It(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),d(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(e){}}function Ct(){this.g=new fe}function At(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ot(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Lt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Pt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Pt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ut(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){Et(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"==typeof e)Tt(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,Tt(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Nt,pe),Nt.prototype.g=function(){return new Rt(this.l,this.j)},Nt.prototype.i=(gt={},function(){return gt}),h(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ot(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Lt(this):Dt(this),3==this.readyState&&Ot(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Lt(this))},e.Qa=function(e){this.g&&(this.response=e,Lt(this))},e.ga=function(){this.g&&Lt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ut,ne);var Ft=/^https?$/i,Vt=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),zt(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function qt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=Gt(e)||2!=e.Z()))if(e.u&&4==Gt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Gt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Gt(e)?e.g.statusText:""}catch(e){a=""}e.l=a+" ["+e.Z()+"]",Bt(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){$t(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Gt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Yt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),ze(t)}hn(e)}function Xt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Yt(e){Xt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;k||N(),C||(k(),C=!0),A.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?l(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{At(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;k||N(),C||(k(),C=!0),A.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v||(e.Y++,e.u=Ce(l(e.Fa,e),ln(e,e.v)),e.v++,0))}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,je(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function cn(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new ke(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Ce(l(e.Ga,e,t),ln(e,e.B)),e.B++,0)))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ae;if(i.Image){const r=new Image;r.onload=u(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(kt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout((()=>{n.abort(),kt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)})).catch((()=>{clearTimeout(r),kt(0,0,!1,t)}))}(r.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),hn(e),Yt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ct(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&ct(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ut(new Nt({eb:n})):new Ut(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Wt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new wn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Ut.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?ge(this.o):ge(Re),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){return void jt(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Vt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){jt(this,e)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Ut.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qt(this):this.bb())},e.bb=function(){qt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Wt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Pe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Pt(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ve(i,n,null)):Ve(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Ye(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(l(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Xt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),rn(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Qt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,mn.aa.N.call(this)},h(yn,ve),h(vn,we),h(wn,pn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new yn(e))},wn.prototype.sa=function(e){re(this.g,new vn)},wn.prototype.ra=function(){re(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Vo=Bo.createWebChannelTransport=function(){return new gn},Fo=Bo.getStatEventTarget=function(){return Ee()},Uo=Bo.Event=be,Mo=Bo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,Po=Bo.ErrorCode=Oe,Le.COMPLETE="complete",Do=Bo.EventType=Le,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Lo=Bo.WebChannel=me,Oo=Bo.FetchXmlHttpFactory=Nt,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,Ro=Bo.XhrIo=Ut}).apply(void 0!==jo?jo:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const qo="@firebase/firestore";class zo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zo.UNAUTHENTICATED=new zo(null),zo.GOOGLE_CREDENTIALS=new zo("google-credentials-uid"),zo.FIRST_PARTY=new zo("first-party-uid"),zo.MOCK_USER=new zo("mock-user");let $o="10.12.1";const Go=new z("@firebase/firestore");function Ho(){return Go.logLevel}function Ko(e,...t){if(Go.logLevel<=F.DEBUG){const n=t.map(Xo);Go.debug(`Firestore (${$o}): ${e}`,...n)}}function Wo(e,...t){if(Go.logLevel<=F.ERROR){const n=t.map(Xo);Go.error(`Firestore (${$o}): ${e}`,...n)}}function Qo(e,...t){if(Go.logLevel<=F.WARN){const n=t.map(Xo);Go.warn(`Firestore (${$o}): ${e}`,...n)}}function Xo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Yo(e="Unexpected state"){const t=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: `+e;throw Wo(t),new Error(t)}function Jo(e,t){e||Yo()}function Zo(e,t){return e}const ea={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ta extends y{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class na{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ra{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ia{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zo.UNAUTHENTICATED)))}shutdown(){}}class sa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class oa{constructor(e){this.t=e,this.currentUser=zo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new na;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new na,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ko("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ko("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new na)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ko("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Jo("string"==typeof t.accessToken),new ra(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Jo(null===e||"string"==typeof e),new zo(e)}}class aa{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=zo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ca{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new aa(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(zo.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class la{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ua{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Ko("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Ko("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ko("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ko("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Jo("string"==typeof e.token),this.R=e.token,new la(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ha(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class da{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=ha(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function fa(e,t){return e<t?-1:e>t?1:0}function pa(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class ga{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ta(ea.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ta(ea.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ta(ea.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ta(ea.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ga.fromMillis(Date.now())}static fromDate(e){return ga.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ga(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fa(this.nanoseconds,e.nanoseconds):fa(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ma{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ma(e)}static min(){return new ma(new ga(0,0))}static max(){return new ma(new ga(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ya{constructor(e,t,n){void 0===t?t=0:t>e.length&&Yo(),void 0===n?n=e.length-t:n>e.length-t&&Yo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ya.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ya?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class va extends ya{construct(e,t,n){return new va(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ta(ea.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new va(t)}static emptyPath(){return new va([])}}const wa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ba extends ya{construct(e,t,n){return new ba(e,t,n)}static isValidIdentifier(e){return wa.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ba.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ba(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ta(ea.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ta(ea.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ta(ea.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ta(ea.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ba(t)}static emptyPath(){return new ba([])}}class _a{constructor(e){this.path=e}static fromPath(e){return new _a(va.fromString(e))}static fromName(e){return new _a(va.fromString(e).popFirst(5))}static empty(){return new _a(va.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===va.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return va.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _a(new va(e.slice()))}}function Ea(e){return new Ia(e.readTime,e.key,-1)}class Ia{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ia(ma.min(),_a.empty(),-1)}static max(){return new Ia(ma.max(),_a.empty(),-1)}}function Ta(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=_a.comparator(e.documentKey,t.documentKey),0!==n?n:fa(e.largestBatchId,t.largestBatchId))}const xa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ka(e){if(e.code!==ea.FAILED_PRECONDITION||e.message!==xa)throw e;Ko("LocalStore","Unexpectedly lost primary lease")}class Ca{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Yo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ca(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ca?t:Ca.resolve(t)}catch(e){return Ca.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ca.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ca.reject(t)}static resolve(e){return new Ca(((t,n)=>{t(e)}))}static reject(e){return new Ca(((t,n)=>{n(e)}))}static waitFor(e){return new Ca(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Ca.resolve(!1);for(const n of e)t=t.next((e=>e?Ca.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Ca(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Ca(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Aa(e){return"IndexedDbTransactionError"===e.name}class Na{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ra(e){return null==e}function Oa(e){return 0===e&&1/e==-1/0}Na.oe=-1;function La(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Da(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Pa(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ma{constructor(e,t){this.comparator=e,this.root=t||Fa.EMPTY}insert(e,t){return new Ma(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fa.BLACK,null,null))}remove(e){return new Ma(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ua(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ua(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ua(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ua(this.root,e,this.comparator,!0)}}class Ua{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fa{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Fa.RED,this.left=null!=r?r:Fa.EMPTY,this.right=null!=i?i:Fa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Fa(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Fa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Fa.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Yo();if(this.right.isRed())throw Yo();const e=this.left.check();if(e!==this.right.check())throw Yo();return e+(this.isRed()?0:1)}}Fa.EMPTY=null,Fa.RED=!0,Fa.BLACK=!1,Fa.EMPTY=new class{constructor(){this.size=0}get key(){throw Yo()}get value(){throw Yo()}get color(){throw Yo()}get left(){throw Yo()}get right(){throw Yo()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Fa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Va{constructor(e){this.comparator=e,this.data=new Ma(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ja(this.data.getIterator())}getIteratorFrom(e){return new ja(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Va))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Va(this.comparator);return t.data=e,t}}class ja{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ba{constructor(e){this.fields=e,e.sort(ba.comparator)}static empty(){return new Ba([])}unionWith(e){let t=new Va(ba.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Ba(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class qa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class za{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new qa("Invalid base64 string: "+e):e}}(e);return new za(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new za(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}za.EMPTY_BYTE_STRING=new za("");const $a=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ga(e){if(Jo(!!e),"string"==typeof e){let t=0;const n=$a.exec(e);if(Jo(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ha(e.seconds),nanos:Ha(e.nanos)}}function Ha(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ka(e){return"string"==typeof e?za.fromBase64String(e):za.fromUint8Array(e)}function Wa(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Qa(e){const t=e.mapValue.fields.__previous_value__;return Wa(t)?Qa(t):t}function Xa(e){const t=Ga(e.mapValue.fields.__local_write_time__.timestampValue);return new ga(t.seconds,t.nanos)}class Ya{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Ja{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ja("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ja&&e.projectId===this.projectId&&e.database===this.database}}const Za={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ec(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Wa(e)?4:pc(e)?9007199254740991:10:Yo()}function tc(e,t){if(e===t)return!0;const n=ec(e);if(n!==ec(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Xa(e).isEqual(Xa(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ga(e.timestampValue),r=Ga(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ka(e.bytesValue).isEqual(Ka(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ha(e.geoPointValue.latitude)===Ha(t.geoPointValue.latitude)&&Ha(e.geoPointValue.longitude)===Ha(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ha(e.integerValue)===Ha(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ha(e.doubleValue),r=Ha(t.doubleValue);return n===r?Oa(n)===Oa(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return pa(e.arrayValue.values||[],t.arrayValue.values||[],tc);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(La(n)!==La(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!tc(n[e],r[e])))return!1;return!0}(e,t);default:return Yo()}}function nc(e,t){return void 0!==(e.values||[]).find((e=>tc(e,t)))}function rc(e,t){if(e===t)return 0;const n=ec(e),r=ec(t);if(n!==r)return fa(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fa(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ha(e.integerValue||e.doubleValue),r=Ha(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ic(e.timestampValue,t.timestampValue);case 4:return ic(Xa(e),Xa(t));case 5:return fa(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ka(e),r=Ka(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=fa(n[e],r[e]);if(0!==t)return t}return fa(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=fa(Ha(e.latitude),Ha(t.latitude));return 0!==n?n:fa(Ha(e.longitude),Ha(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=rc(n[e],r[e]);if(t)return t}return fa(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Za.mapValue&&t===Za.mapValue)return 0;if(e===Za.mapValue)return 1;if(t===Za.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=fa(r[e],s[e]);if(0!==t)return t;const o=rc(n[r[e]],i[s[e]]);if(0!==o)return o}return fa(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Yo()}}function ic(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return fa(e,t);const n=Ga(e),r=Ga(t),i=fa(n.seconds,r.seconds);return 0!==i?i:fa(n.nanos,r.nanos)}function sc(e){return oc(e)}function oc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ga(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ka(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return _a.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=oc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${oc(e.fields[i])}`;return n+"}"}(e.mapValue):Yo()}function ac(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function cc(e){return!!e&&"integerValue"in e}function lc(e){return!!e&&"arrayValue"in e}function uc(e){return!!e&&"nullValue"in e}function hc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function dc(e){return!!e&&"mapValue"in e}function fc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Da(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=fc(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=fc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function pc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class gc{constructor(e){this.value=e}static empty(){return new gc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!dc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(t)}setAll(e){let t=ba.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=fc(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());dc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];dc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Da(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new gc(fc(this.value))}}function mc(e){const t=[];return Da(e.fields,((e,n)=>{const r=new ba([e]);if(dc(n)){const e=mc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ba(t)}class yc{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new yc(e,0,ma.min(),ma.min(),ma.min(),gc.empty(),0)}static newFoundDocument(e,t,n,r){return new yc(e,1,t,ma.min(),n,r,0)}static newNoDocument(e,t){return new yc(e,2,t,ma.min(),ma.min(),gc.empty(),0)}static newUnknownDocument(e,t){return new yc(e,3,t,ma.min(),ma.min(),gc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ma.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ma.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vc{constructor(e,t){this.position=e,this.inclusive=t}}function wc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?_a.comparator(_a.fromName(o.referenceValue),n.key):rc(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function bc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!tc(e.position[n],t.position[n]))return!1;return!0}class _c{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ec(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ic{}class Tc extends Ic{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Rc(e,t,n):"array-contains"===t?new Pc(e,n):"in"===t?new Mc(e,n):"not-in"===t?new Uc(e,n):"array-contains-any"===t?new Fc(e,n):new Tc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Oc(e,n):new Lc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(rc(t,this.value)):null!==t&&ec(this.value)===ec(t)&&this.matchesComparison(rc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Yo()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xc extends Ic{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new xc(e,t)}matches(e){return Sc(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Sc(e){return"and"===e.op}function kc(e){return function(e){for(const t of e.filters)if(t instanceof xc)return!1;return!0}(e)&&Sc(e)}function Cc(e){if(e instanceof Tc)return e.field.canonicalString()+e.op.toString()+sc(e.value);if(kc(e))return e.filters.map((e=>Cc(e))).join(",");{const t=e.filters.map((e=>Cc(e))).join(",");return`${e.op}(${t})`}}function Ac(e,t){return e instanceof Tc?function(e,t){return t instanceof Tc&&e.op===t.op&&e.field.isEqual(t.field)&&tc(e.value,t.value)}(e,t):e instanceof xc?function(e,t){return t instanceof xc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Ac(n,t.filters[r])),!0)}(e,t):void Yo()}function Nc(e){return e instanceof Tc?function(e){return`${e.field.canonicalString()} ${e.op} ${sc(e.value)}`}(e):e instanceof xc?function(e){return e.op.toString()+" {"+e.getFilters().map(Nc).join(" ,")+"}"}(e):"Filter"}class Rc extends Tc{constructor(e,t,n){super(e,t,n),this.key=_a.fromName(n.referenceValue)}matches(e){const t=_a.comparator(e.key,this.key);return this.matchesComparison(t)}}class Oc extends Tc{constructor(e,t){super(e,"in",t),this.keys=Dc(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Lc extends Tc{constructor(e,t){super(e,"not-in",t),this.keys=Dc(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Dc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>_a.fromName(e.referenceValue)))}class Pc extends Tc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lc(t)&&nc(t.arrayValue,this.value)}}class Mc extends Tc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&nc(this.value.arrayValue,t)}}class Uc extends Tc{constructor(e,t){super(e,"not-in",t)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!nc(this.value.arrayValue,t)}}class Fc extends Tc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>nc(this.value.arrayValue,e)))}}class Vc{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function jc(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Vc(e,t,n,r,i,s,o)}function Bc(e){const t=Zo(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Cc(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ra(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>sc(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>sc(e))).join(",")),t.ue=e}return t.ue}function qc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ec(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ac(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bc(e.startAt,t.startAt)&&bc(e.endAt,t.endAt)}function zc(e){return _a.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class $c{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Gc(e){return new $c(e)}function Hc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Kc(e){return null!==e.collectionGroup}function Wc(e){const t=Zo(e);if(null===t.ce){t.ce=[];const e=new Set;for(const n of t.explicitOrderBy)t.ce.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Va(ba.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new _c(r,n))})),e.has(ba.keyField().canonicalString())||t.ce.push(new _c(ba.keyField(),n))}return t.ce}function Qc(e){const t=Zo(e);return t.le||(t.le=function(e,t){if("F"===e.limitType)return jc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new _c(e.field,t)}));const n=e.endAt?new vc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new vc(e.startAt.position,e.startAt.inclusive):null;return jc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,Wc(e))),t.le}function Xc(e,t){const n=e.filters.concat([t]);return new $c(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Yc(e,t,n){return new $c(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Jc(e,t){return qc(Qc(e),Qc(t))&&e.limitType===t.limitType}function Zc(e){return`${Bc(Qc(e))}|lt:${e.limitType}`}function el(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Nc(e))).join(", ")}]`),Ra(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>sc(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>sc(e))).join(",")),`Target(${t})`}(Qc(e))}; limitType=${e.limitType})`}function tl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):_a.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Wc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=wc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Wc(e),t)||e.endAt&&!function(e,t,n){const r=wc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Wc(e),t))}(e,t)}function nl(e){return(t,n)=>{let r=!1;for(const i of Wc(e)){const e=rl(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function rl(e,t,n){const r=e.field.isKeyField()?_a.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?rc(r,i):Yo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Yo()}}class il{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return Pa(this.inner)}size(){return this.innerSize}}const sl=new Ma(_a.comparator);function ol(){return sl}const al=new Ma(_a.comparator);function cl(...e){let t=al;for(const n of e)t=t.insert(n.key,n);return t}function ll(e){let t=al;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function ul(){return dl()}function hl(){return dl()}function dl(){return new il((e=>e.toString()),((e,t)=>e.isEqual(t)))}const fl=new Ma(_a.comparator),pl=new Va(_a.comparator);function gl(...e){let t=pl;for(const n of e)t=t.add(n);return t}const ml=new Va(fa);function yl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oa(t)?"-0":t}}function vl(e){return{integerValue:""+e}}function wl(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Oa(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?vl(t):yl(e,t)}class bl{constructor(){this._=void 0}}function _l(e,t,n){return e instanceof Tl?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Wa(t)&&(t=Qa(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof xl?Sl(e,t):e instanceof kl?Cl(e,t):function(e,t){const n=Il(e,t),r=Nl(n)+Nl(e.Pe);return cc(n)&&cc(e.Pe)?vl(r):yl(e.serializer,r)}(e,t)}function El(e,t,n){return e instanceof xl?Sl(e,t):e instanceof kl?Cl(e,t):n}function Il(e,t){return e instanceof Al?function(e){return cc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Tl extends bl{}class xl extends bl{constructor(e){super(),this.elements=e}}function Sl(e,t){const n=Rl(t);for(const t of e.elements)n.some((e=>tc(e,t)))||n.push(t);return{arrayValue:{values:n}}}class kl extends bl{constructor(e){super(),this.elements=e}}function Cl(e,t){let n=Rl(t);for(const t of e.elements)n=n.filter((e=>!tc(e,t)));return{arrayValue:{values:n}}}class Al extends bl{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Nl(e){return Ha(e.integerValue||e.doubleValue)}function Rl(e){return lc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ol{constructor(e,t){this.version=e,this.transformResults=t}}class Ll{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ll}static exists(e){return new Ll(void 0,e)}static updateTime(e){return new Ll(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Pl{}function Ml(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Hl(e.key,Ll.none()):new Bl(e.key,e.data,Ll.none());{const n=e.data,r=gc.empty();let i=new Va(ba.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ql(e.key,r,new Ba(i.toArray()),Ll.none())}}function Ul(e,t,n){e instanceof Bl?function(e,t,n){const r=e.value.clone(),i=$l(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ql?function(e,t,n){if(!Dl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=$l(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(zl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Fl(e,t,n,r){return e instanceof Bl?function(e,t,n,r){if(!Dl(e.precondition,t))return n;const i=e.value.clone(),s=Gl(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ql?function(e,t,n,r){if(!Dl(e.precondition,t))return n;const i=Gl(e.fieldTransforms,r,t),s=t.data;return s.setAll(zl(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Dl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Vl(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Il(r.transform,e||null);null!=i&&(null===n&&(n=gc.empty()),n.set(r.field,i))}return n||null}function jl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&pa(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof xl&&t instanceof xl||e instanceof kl&&t instanceof kl?pa(e.elements,t.elements,tc):e instanceof Al&&t instanceof Al?tc(e.Pe,t.Pe):e instanceof Tl&&t instanceof Tl}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Bl extends Pl{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ql extends Pl{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function zl(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function $l(e,t,n){const r=new Map;Jo(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,El(o,a,n[i]))}return r}function Gl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,_l(e,s,t))}return r}class Hl extends Pl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kl extends Pl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Wl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&Ul(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Fl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Fl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hl();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Ml(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ma.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),gl())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,((e,t)=>jl(e,t)))&&pa(this.baseMutations,e.baseMutations,((e,t)=>jl(e,t)))}}class Ql{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Jo(e.mutations.length===n.length);let r=fl;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Ql(e,t,n,r)}}class Xl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yl{constructor(e,t){this.count=e,this.unchangedNames=t}}var Jl,Zl;function eu(e){if(void 0===e)return Wo("GRPC error has no .code"),ea.UNKNOWN;switch(e){case Jl.OK:return ea.OK;case Jl.CANCELLED:return ea.CANCELLED;case Jl.UNKNOWN:return ea.UNKNOWN;case Jl.DEADLINE_EXCEEDED:return ea.DEADLINE_EXCEEDED;case Jl.RESOURCE_EXHAUSTED:return ea.RESOURCE_EXHAUSTED;case Jl.INTERNAL:return ea.INTERNAL;case Jl.UNAVAILABLE:return ea.UNAVAILABLE;case Jl.UNAUTHENTICATED:return ea.UNAUTHENTICATED;case Jl.INVALID_ARGUMENT:return ea.INVALID_ARGUMENT;case Jl.NOT_FOUND:return ea.NOT_FOUND;case Jl.ALREADY_EXISTS:return ea.ALREADY_EXISTS;case Jl.PERMISSION_DENIED:return ea.PERMISSION_DENIED;case Jl.FAILED_PRECONDITION:return ea.FAILED_PRECONDITION;case Jl.ABORTED:return ea.ABORTED;case Jl.OUT_OF_RANGE:return ea.OUT_OF_RANGE;case Jl.UNIMPLEMENTED:return ea.UNIMPLEMENTED;case Jl.DATA_LOSS:return ea.DATA_LOSS;default:return Yo()}}(Zl=Jl||(Jl={}))[Zl.OK=0]="OK",Zl[Zl.CANCELLED=1]="CANCELLED",Zl[Zl.UNKNOWN=2]="UNKNOWN",Zl[Zl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zl[Zl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zl[Zl.NOT_FOUND=5]="NOT_FOUND",Zl[Zl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zl[Zl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zl[Zl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zl[Zl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zl[Zl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zl[Zl.ABORTED=10]="ABORTED",Zl[Zl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zl[Zl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zl[Zl.INTERNAL=13]="INTERNAL",Zl[Zl.UNAVAILABLE=14]="UNAVAILABLE",Zl[Zl.DATA_LOSS=15]="DATA_LOSS";const tu=new ko([4294967295,4294967295],0);function nu(e){const t=(new TextEncoder).encode(e),n=new Co;return n.update(t),new Uint8Array(n.digest())}function ru(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ko([n,r],0),new ko([i,s],0)]}class iu{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new su(`Invalid padding: ${t}`);if(n<0)throw new su(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new su(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new su(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ko.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(ko.fromNumber(n)));return 1===r.compare(tu)&&(r=new ko([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=nu(e),[n,r]=ru(t);for(let e=0;e<this.hashCount;e++){const t=this.Ee(n,r,e);if(!this.de(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new iu(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=nu(e),[n,r]=ru(t);for(let e=0;e<this.hashCount;e++){const t=this.Ee(n,r,e);this.Ae(t)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ou{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,au.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ou(ma.min(),r,new Ma(fa),ol(),gl())}}class au{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new au(n,t,gl(),gl(),gl())}}class cu{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class lu{constructor(e,t){this.targetId=e,this.me=t}}class uu{constructor(e,t,n=za.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class hu{constructor(){this.fe=0,this.ge=pu(),this.pe=za.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=gl(),t=gl(),n=gl();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Yo()}})),new au(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=pu()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Jo(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class du{constructor(e){this.Le=e,this.Be=new Map,this.ke=ol(),this.qe=fu(),this.Qe=new Ma(fa)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Yo()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(zc(i))if(0===n){const e=new _a(i.path);this.Ue(t,e,yc.newNoDocument(e,ma.min()))}else Jo(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Ka(n).toUint8Array()}catch(e){if(e instanceof qa)return Qo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new iu(s,r,i)}catch(e){return Qo(e instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&zc(i.target)){const t=new _a(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,yc.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=gl();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new ou(e,t,this.Qe,this.ke,n);return this.ke=ol(),this.qe=fu(),this.Qe=new Ma(fa),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new hu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Va(fa),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ko("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hu),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function fu(){return new Ma(_a.comparator)}function pu(){return new Ma(_a.comparator)}const gu={asc:"ASCENDING",desc:"DESCENDING"},mu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yu={and:"AND",or:"OR"};class vu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wu(e,t){return e.useProto3Json||Ra(t)?t:{value:t}}function bu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _u(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Eu(e,t){return bu(e,t.toTimestamp())}function Iu(e){return Jo(!!e),ma.fromTimestamp(function(e){const t=Ga(e);return new ga(t.seconds,t.nanos)}(e))}function Tu(e,t){return xu(e,t).canonicalString()}function xu(e,t){const n=function(e){return new va(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Su(e){const t=va.fromString(e);return Jo($u(t)),t}function ku(e,t){return Tu(e.databaseId,t.path)}function Cu(e,t){const n=Su(t);if(n.get(1)!==e.databaseId.projectId)throw new ta(ea.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ta(ea.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new _a(Ru(n))}function Au(e,t){return Tu(e.databaseId,t)}function Nu(e){return new va(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ru(e){return Jo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ou(e,t,n){return{name:ku(e,t),fields:n.value.mapValue.fields}}function Lu(e,t){return{documents:[Au(e,t.path)]}}function Du(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Au(e,i);const s=function(e){if(0!==e.length)return qu(xc.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:ju(e.field),direction:Uu(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wu(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Pu(e){let t=function(e){const t=Su(e);return 4===t.length?va.emptyPath():Ru(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Jo(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Mu(e);return t instanceof xc&&kc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new _c(Bu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ra(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new vc(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new vc(n,t)}(n.endAt)),function(e,t,n,r,i,s,o,a){return new $c(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",c,l)}function Mu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Bu(e.unaryFilter.field);return Tc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Bu(e.unaryFilter.field);return Tc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Bu(e.unaryFilter.field);return Tc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Bu(e.unaryFilter.field);return Tc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Yo()}}(e):void 0!==e.fieldFilter?function(e){return Tc.create(Bu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return xc.create(e.compositeFilter.filters.map((e=>Mu(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Yo()}}(e.compositeFilter.op))}(e):Yo()}function Uu(e){return gu[e]}function Fu(e){return mu[e]}function Vu(e){return yu[e]}function ju(e){return{fieldPath:e.canonicalString()}}function Bu(e){return ba.fromServerFormat(e.fieldPath)}function qu(e){return e instanceof Tc?function(e){if("=="===e.op){if(hc(e.value))return{unaryFilter:{field:ju(e.field),op:"IS_NAN"}};if(uc(e.value))return{unaryFilter:{field:ju(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hc(e.value))return{unaryFilter:{field:ju(e.field),op:"IS_NOT_NAN"}};if(uc(e.value))return{unaryFilter:{field:ju(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ju(e.field),op:Fu(e.op),value:e.value}}}(e):e instanceof xc?function(e){const t=e.getFilters().map((e=>qu(e)));return 1===t.length?t[0]:{compositeFilter:{op:Vu(e.op),filters:t}}}(e):Yo()}function zu(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function $u(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Gu{constructor(e,t,n,r,i=ma.min(),s=ma.min(),o=za.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Gu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Hu{constructor(e){this.ct=e}}function Ku(e){const t=Pu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Yc(t,t.limit,"L"):t}class Wu{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Ha(e.integerValue));else if("doubleValue"in e){const n=Ha(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Oa(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=Ga(n)),t.At(`${n.seconds||""}`),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ka(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?pc(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Yo()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const e of Object.keys(n))this.Rt(e,t),this.It(n[e],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const e of n)this.It(e,t)}gt(e,t){this.Et(t,37),_a.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}Wu.bt=new Wu;class Qu{constructor(){this._n=new Xu}addToCollectionParentIndex(e,t){return this._n.add(t),Ca.resolve()}getCollectionParents(e,t){return Ca.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Ca.resolve()}deleteFieldIndex(e,t){return Ca.resolve()}deleteAllFieldIndexes(e){return Ca.resolve()}createTargetIndexes(e,t){return Ca.resolve()}getDocumentsMatchingTarget(e,t){return Ca.resolve(null)}getIndexType(e,t){return Ca.resolve(0)}getFieldIndexes(e,t){return Ca.resolve([])}getNextCollectionGroupToUpdate(e){return Ca.resolve(null)}getMinOffset(e,t){return Ca.resolve(Ia.min())}getMinOffsetFromCollectionGroup(e,t){return Ca.resolve(Ia.min())}updateCollectionGroup(e,t,n){return Ca.resolve()}updateIndexEntries(e,t){return Ca.resolve()}}class Xu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Va(va.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Va(va.comparator)).toArray()}}new Uint8Array(0);class Yu{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Yu(e,Yu.DEFAULT_COLLECTION_PERCENTILE,Yu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Yu.DEFAULT_COLLECTION_PERCENTILE=10,Yu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yu.DEFAULT=new Yu(41943040,Yu.DEFAULT_COLLECTION_PERCENTILE,Yu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yu.DISABLED=new Yu(-1,0,0);class Ju{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ju(0)}static Ln(){return new Ju(-1)}}class Zu{constructor(){this.changes=new il((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ca.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class th{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Fl(n.mutation,e,Ba.empty(),ga.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,gl()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=gl()){const r=ul();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=cl();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=ul();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,gl())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ol();const s=dl(),o=dl();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ql)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Fl(o.mutation,t,o.mutation.getFieldMask(),ga.now())):s.set(t.key,Ba.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new eh(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=dl();let r=new Ma(((e,t)=>e-t)),i=gl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Ba.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||gl()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=hl();c.forEach((e=>{if(!i.has(e)){const r=Ml(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Ca.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return _a.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ca.resolve(ul());let o=-1,a=i;return s.next((t=>Ca.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Ca.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,gl()))).next((e=>({batchId:o,changes:ll(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _a(t)).next((e=>{let t=cl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=cl();return this.indexManager.getCollectionParents(e,i).next((o=>Ca.forEach(o,(o=>{const a=function(e,t){return new $c(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,yc.newInvalidDocument(r)))}));let n=cl();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Fl(s.mutation,r,Ba.empty(),ga.now()),tl(t,r)&&(n=n.insert(e,r))})),n}))}}class nh{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Ca.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Iu(e.createTime)}}(t)),Ca.resolve()}getNamedQuery(e,t){return Ca.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Ku(e.bundledQuery),readTime:Iu(e.readTime)}}(t)),Ca.resolve()}}class rh{constructor(){this.overlays=new Ma(_a.comparator),this.hr=new Map}getOverlay(e,t){return Ca.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ul();return Ca.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Ca.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Ca.resolve()}getOverlaysForCollection(e,t,n){const r=ul(),i=t.length+1,s=new _a(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ca.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ma(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ul(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=ul(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Ca.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Xl(t,n));let i=this.hr.get(t);void 0===i&&(i=gl(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class ih{constructor(){this.Pr=new Va(sh.Ir),this.Tr=new Va(sh.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new sh(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new sh(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new _a(new va([])),n=new sh(t,e),r=new sh(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new _a(new va([])),n=new sh(t,e),r=new sh(t,e+1);let i=gl();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new sh(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class sh{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return _a.comparator(e.key,t.key)||fa(e.pr,t.pr)}static Er(e,t){return fa(e.pr,t.pr)||_a.comparator(e.key,t.key)}}class oh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Va(sh.Ir)}checkEmpty(e){return Ca.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Wl(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.wr=this.wr.add(new sh(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Ca.resolve(s)}lookupMutationBatch(e,t){return Ca.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return Ca.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ca.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Ca.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new sh(t,0),r=new sh(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),Ca.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Va(fa);return t.forEach((e=>{const t=new sh(e,0),r=new sh(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),Ca.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;_a.isDocumentKey(i)||(i=i.child(""));const s=new sh(new _a(i),0);let o=new Va(fa);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),Ca.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Jo(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Ca.forEach(t.mutations,(r=>{const i=new sh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new sh(t,0),r=this.wr.firstAfterOrEqual(n);return Ca.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ca.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ah{constructor(e){this.vr=e,this.docs=new Ma(_a.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ca.resolve(n?n.document.mutableCopy():yc.newInvalidDocument(t))}getEntries(e,t){let n=ol();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():yc.newInvalidDocument(e))})),Ca.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ol();const s=t.path,o=new _a(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ta(Ea(o),n)<=0||(r.has(o.key)||tl(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Ca.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Yo()}Fr(e,t){return Ca.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ch(this)}getSize(e){return Ca.resolve(this.size)}}class ch extends Zu{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),Ca.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class lh{constructor(e){this.persistence=e,this.Mr=new il((e=>Bc(e)),qc),this.lastRemoteSnapshotVersion=ma.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ih,this.targetCount=0,this.Lr=Ju.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Ca.resolve()}getLastRemoteSnapshotVersion(e){return Ca.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ca.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Ca.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Ca.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Ju(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Ca.resolve()}updateTargetData(e,t){return this.qn(t),Ca.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Ca.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Ca.waitFor(i).next((()=>r))}getTargetCount(e){return Ca.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Ca.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Ca.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Ca.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Ca.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Ca.resolve(n)}containsKey(e,t){return Ca.resolve(this.Nr.containsKey(t))}}class uh{constructor(e,t){this.Br={},this.overlays={},this.kr=new Na(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new lh(this),this.indexManager=new Qu,this.remoteDocumentCache=function(e){return new ah(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Hu(t),this.$r=new nh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new oh(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Ko("MemoryPersistence","Starting transaction:",e);const r=new hh(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return Ca.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class hh extends Sa{constructor(e){super(),this.currentSequenceNumber=e}}class dh{constructor(e){this.persistence=e,this.zr=new ih,this.jr=null}static Hr(e){return new dh(e)}get Jr(){if(this.jr)return this.jr;throw Yo()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Ca.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Ca.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Ca.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ca.forEach(this.Jr,(n=>{const r=_a.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,ma.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Ca.or([()=>Ca.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class fh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=gl(),r=gl();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new fh(e,t.fromCache,n,r)}}class ph{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gh{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=!function(){var t;const n=null===(t=o())||void 0===t?void 0:t.forceEnvironment;if("node"===n)return!0;if("browser"===n)return!1;try{return"[object process]"===Object.prototype.toString.call(e.g.process)}catch(e){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(f())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new ph;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Ho()<=F.DEBUG&&Ko("QueryEngine","SDK will not create cache indexes for query:",el(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ca.resolve()):(Ho()<=F.DEBUG&&Ko("QueryEngine","Query:",el(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Ho()<=F.DEBUG&&Ko("QueryEngine","The SDK decides to create cache indexes for query:",el(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qc(t))):Ca.resolve())}ji(e,t){if(Hc(t))return Ca.resolve(null);let n=Qc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Yc(t,null,"F"),n=Qc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=gl(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Yc(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Hc(t)||r.isEqual(ma.min())?Ca.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?Ca.resolve(null):(Ho()<=F.DEBUG&&Ko("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),el(t)),this.es(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ma.fromTimestamp(1e9===r?new ga(n+1,0):new ga(n,r));return new Ia(i,_a.empty(),t)}(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Va(nl(e));return t.forEach(((t,r)=>{tl(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Ho()<=F.DEBUG&&Ko("QueryEngine","Using full collection scan to execute query:",el(t)),this.zi.getDocumentsMatchingQuery(e,t,Ia.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class mh{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Ma(fa),this.rs=new il((e=>Bc(e)),qc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new th(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}async function yh(e,t){const n=Zo(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=gl();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function vh(e){const t=Zo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function wh(e,t){const n=Zo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function bh(e,t,n){const r=Zo(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Aa(e))throw e;Ko("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function _h(e,t,n){const r=Zo(e);let i=ma.min(),s=gl();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Zo(e),i=r.rs.get(n);return void 0!==i?Ca.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Qc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:ma.min(),n?s:gl()))).next((e=>(function(e,t,n){let r=e.ss.get(t)||ma.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,hs:s})))))}class Eh{constructor(){this.activeTargetIds=ml}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ih{constructor(){this.no=new Eh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Eh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Th{io(e){}shutdown(){}}class xh{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ko("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ko("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Sh=null;function kh(){return null===Sh?Sh=268435456+Math.round(2147483648*Math.random()):Sh++,"0x"+Sh.toString(16)}const Ch={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ah{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Nh="WebChannelConnection";class Rh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So=`projects/${n}/databases/${r}`,this.bo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Do(){return!1}Co(e,t,n,r,i){const s=kh(),o=this.vo(e,t.toUriEncodedString());Ko("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,o,a,n).then((t=>(Ko("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Qo("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}xo(e,t,n,r,i,s){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+$o,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=Ch[e];return`${this.wo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=kh();return new Promise(((s,o)=>{const a=new Ro;a.setWithCredentials(!0),a.listenOnce(Do.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Po.NO_ERROR:const t=a.getResponseJson();Ko(Nh,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Po.TIMEOUT:Ko(Nh,`RPC '${e}' ${i} timed out`),o(new ta(ea.DEADLINE_EXCEEDED,"Request time out"));break;case Po.HTTP_ERROR:const n=a.getStatus();if(Ko(Nh,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ea).indexOf(t)>=0?t:ea.UNKNOWN}(t.status);o(new ta(e,t.message))}else o(new ta(ea.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ta(ea.UNAVAILABLE,"Connection failed."));break;default:Yo()}}finally{Ko(Nh,`RPC '${e}' ${i} completed.`)}}));const c=JSON.stringify(r);Ko(Nh,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",c,n,15)}))}Oo(e,t,n){const r=kh(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Vo(),o=Fo(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new Oo({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");Ko(Nh,`Creating RPC '${e}' stream ${r}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Ah({lo:t=>{d?Ko(Nh,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Ko(Nh,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Ko(Nh,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Lo.EventType.OPEN,(()=>{d||(Ko(Nh,`RPC '${e}' stream ${r} transport opened.`),f.mo())})),p(u,Lo.EventType.CLOSE,(()=>{d||(d=!0,Ko(Nh,`RPC '${e}' stream ${r} transport closed`),f.po())})),p(u,Lo.EventType.ERROR,(t=>{d||(d=!0,Qo(Nh,`RPC '${e}' stream ${r} transport errored:`,t),f.po(new ta(ea.UNAVAILABLE,"The operation could not be completed")))})),p(u,Lo.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Jo(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ko(Nh,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Jl[e];if(void 0!==t)return eu(t)}(t),i=o.message;void 0===n&&(n=ea.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.po(new ta(n,i)),u.close()}else Ko(Nh,`RPC '${e}' stream ${r} received:`,i),f.yo(i)}})),p(o,Uo.STAT_EVENT,(t=>{t.stat===Mo.PROXY?Ko(Nh,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Mo.NOPROXY&&Ko(Nh,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function Oh(){return"undefined"!=typeof document?document:null}function Lh(e){return new vu(e,!0)}class Dh{constructor(e,t,n=1e3,r=1.5,i=6e4){this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&Ko("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Ph{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Dh(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===ea.RESOURCE_EXHAUSTED?(Wo(t.toString()),Wo("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===ea.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.jo===t&&this.u_(e,n)}),(t=>{e((()=>{const e=new ta(ea.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return Ko("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(Ko("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Mh extends Ph{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Yo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Jo(void 0===t||"string"==typeof t),za.fromBase64String(t||"")):(Jo(void 0===t||t instanceof Buffer||t instanceof Uint8Array),za.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?ea.UNKNOWN:eu(e.code);return new ta(t,e.message||"")}(o);n=new uu(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cu(e,r.document.name),s=Iu(r.document.updateTime),o=r.document.createTime?Iu(r.document.createTime):ma.min(),a=new gc({mapValue:{fields:r.document.fields}}),c=yc.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new cu(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Cu(e,r.document),s=r.readTime?Iu(r.readTime):ma.min(),o=yc.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cu([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Cu(e,r.document),s=r.removedTargetIds||[];n=new cu([],s,i,null)}else{if(!("filter"in t))return Yo();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Yl(r,i),o=e.targetId;n=new lu(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ma.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ma.min():t.readTime?Iu(t.readTime):ma.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=Nu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=zc(r)?{documents:Lu(e,r)}:{query:Du(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=_u(e,t.resumeToken);const r=wu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ma.min())>0){n.readTime=bu(e,t.snapshotVersion.toTimestamp());const r=wu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=Nu(this.serializer),t.removeTarget=e,this.i_(t)}}class Uh extends Ph{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Jo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(Jo(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Iu(e.updateTime):Iu(t);return n.isEqual(ma.min())&&(n=Iu(t)),new Ol(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Iu(e.commitTime);return this.listener.A_(n,t)}return Jo(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Nu(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof Bl)n={update:Ou(e,t.key,t.value)};else if(t instanceof Hl)n={delete:ku(e,t.key)};else if(t instanceof ql)n={update:Ou(e,t.key,t.data),updateMask:zu(t.fieldMask)};else{if(!(t instanceof Kl))return Yo();n={verify:ku(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Tl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof kl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Al)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Yo()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Eu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Yo()}(e,t.precondition)),n}(this.serializer,e)))};this.i_(t)}}class Fh extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new ta(ea.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Co(e,xu(t,n),r,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===ea.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ta(ea.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.xo(e,xu(t,n),r,s,o,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===ea.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ta(ea.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class Vh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Wo(t),this.y_=!1):Ko("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class jh{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{Qh(this)&&(Ko("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Zo(e);t.M_.add(4),await qh(t),t.N_.set("Unknown"),t.M_.delete(4),await Bh(t)}(this))}))})),this.N_=new Vh(n,r)}}async function Bh(e){if(Qh(e))for(const t of e.x_)await t(!0)}async function qh(e){for(const t of e.x_)await t(!1)}function zh(e,t){const n=Zo(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Wh(n)?Kh(n):fd(n).Xo()&&Gh(n,t))}function $h(e,t){const n=Zo(e),r=fd(n);n.F_.delete(t),r.Xo()&&Hh(n,t),0===n.F_.size&&(r.Xo()?r.n_():Qh(n)&&n.N_.set("Unknown"))}function Gh(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ma.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fd(e).P_(t)}function Hh(e,t){e.L_.xe(t),fd(e).I_(t)}function Kh(e){e.L_=new du({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),fd(e).start(),e.N_.w_()}function Wh(e){return Qh(e)&&!fd(e).Zo()&&e.F_.size>0}function Qh(e){return 0===Zo(e).M_.size}function Xh(e){e.L_=void 0}async function Yh(e){e.N_.set("Online")}async function Jh(e){e.F_.forEach(((t,n)=>{Gh(e,t)}))}async function Zh(e,t){Xh(e),Wh(e)?(e.N_.D_(t),Kh(e)):e.N_.set("Unknown")}async function ed(e,t,n){if(e.N_.set("Online"),t instanceof uu&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Ko("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await td(e,n)}else if(t instanceof cu?e.L_.Ke(t):t instanceof lu?e.L_.He(t):e.L_.We(t),!n.isEqual(ma.min()))try{const t=await vh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(za.EMPTY_BYTE_STRING,r.snapshotVersion)),Hh(e,t);const i=new Gu(r.target,t,n,r.sequenceNumber);Gh(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ko("RemoteStore","Failed to raise snapshot:",t),await td(e,t)}}async function td(e,t,n){if(!Aa(t))throw t;e.M_.add(1),await qh(e),e.N_.set("Offline"),n||(n=()=>vh(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ko("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Bh(e)}))}function nd(e,t){return t().catch((n=>td(e,n,t)))}async function rd(e){const t=Zo(e),n=pd(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;id(t);)try{const e=await wh(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,sd(t,e)}catch(e){await td(t,e)}od(t)&&ad(t)}function id(e){return Qh(e)&&e.v_.length<10}function sd(e,t){e.v_.push(t);const n=pd(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function od(e){return Qh(e)&&!pd(e).Zo()&&e.v_.length>0}function ad(e){pd(e).start()}async function cd(e){pd(e).V_()}async function ld(e){const t=pd(e);for(const n of e.v_)t.d_(n.mutations)}async function ud(e,t,n){const r=e.v_.shift(),i=Ql.from(r,t,n);await nd(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await rd(e)}async function hd(e,t){t&&pd(e).E_&&await async function(e,t){if(function(e){return function(e){switch(e){default:return Yo();case ea.CANCELLED:case ea.UNKNOWN:case ea.DEADLINE_EXCEEDED:case ea.RESOURCE_EXHAUSTED:case ea.INTERNAL:case ea.UNAVAILABLE:case ea.UNAUTHENTICATED:return!1;case ea.INVALID_ARGUMENT:case ea.NOT_FOUND:case ea.ALREADY_EXISTS:case ea.PERMISSION_DENIED:case ea.FAILED_PRECONDITION:case ea.ABORTED:case ea.OUT_OF_RANGE:case ea.UNIMPLEMENTED:case ea.DATA_LOSS:return!0}}(e)&&e!==ea.ABORTED}(t.code)){const n=e.v_.shift();pd(e).t_(),await nd(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await rd(e)}}(e,t),od(e)&&ad(e)}async function dd(e,t){const n=Zo(e);n.asyncQueue.verifyOperationInProgress(),Ko("RemoteStore","RemoteStore received new credentials");const r=Qh(n);n.M_.add(3),await qh(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Bh(n)}function fd(e){return e.B_||(e.B_=function(e,t,n){const r=Zo(e);return r.f_(),new Mh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Yh.bind(null,e),To:Jh.bind(null,e),Ao:Zh.bind(null,e),h_:ed.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),Wh(e)?Kh(e):e.N_.set("Unknown")):(await e.B_.stop(),Xh(e))}))),e.B_}function pd(e){return e.k_||(e.k_=function(e,t,n){const r=Zo(e);return r.f_(),new Uh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:cd.bind(null,e),Ao:hd.bind(null,e),R_:ld.bind(null,e),A_:ud.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await rd(e)):(await e.k_.stop(),e.v_.length>0&&(Ko("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))}))),e.k_}class gd{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new na,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new gd(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ta(ea.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function md(e,t){if(Wo("AsyncQueue",`${t}: ${e}`),Aa(e))return new ta(ea.UNAVAILABLE,`${t}: ${e}`);throw e}class yd{constructor(e){this.comparator=e?(t,n)=>e(t,n)||_a.comparator(t.key,n.key):(e,t)=>_a.comparator(e.key,t.key),this.keyedMap=cl(),this.sortedSet=new Ma(this.comparator)}static emptySet(e){return new yd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yd))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new yd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class vd{constructor(){this.q_=new Ma(_a.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Yo():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class wd{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new wd(e,t,yd.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class bd{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class _d{constructor(){this.queries=new il((e=>Zc(e)),Jc),this.onlineState="Unknown",this.z_=new Set}}async function Ed(e,t){const n=Zo(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new bd,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=md(e,`Initialization of query '${el(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&Sd(n)}async function Id(e,t){const n=Zo(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Td(e,t){const n=Zo(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.U_)t.H_(e)&&(r=!0);i.K_=e}}r&&Sd(n)}function xd(e,t,n){const r=Zo(e),i=r.queries.get(t);if(i)for(const e of i.U_)e.onError(n);r.queries.delete(t)}function Sd(e){e.z_.forEach((e=>{e.next()}))}var kd,Cd;(Cd=kd||(kd={})).J_="default",Cd.Cache="cache";class Ad{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new wd(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=wd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==kd.Cache}}class Nd{constructor(e){this.key=e}}class Rd{constructor(e){this.key=e}}class Od{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=gl(),this.mutatedKeys=gl(),this.Ia=nl(e),this.Ta=new yd(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new vd,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=tl(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||c&&this.Ia(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yo()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,c=a!==this.ha;return this.ha=a,0!==s.length||c?{snapshot:new wd(this.query,e.Ta,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new vd,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=gl(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new Rd(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new Nd(n))})),t}pa(e){this.la=e.hs,this.Pa=gl();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return wd.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Ld{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Dd{constructor(e){this.key=e,this.wa=!1}}class Pd{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new il((e=>Zc(e)),Jc),this.Da=new Map,this.Ca=new Set,this.va=new Ma(_a.comparator),this.Fa=new Map,this.Ma=new ih,this.xa={},this.Oa=new Map,this.Na=Ju.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function Md(e,t,n=!0){const r=nf(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await Fd(r,t,n,!0),i}async function Ud(e,t){const n=nf(e);await Fd(n,t,!0,!1)}async function Fd(e,t,n,r){const i=await function(e,t){const n=Zo(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,Ca.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Gu(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}(e.localStore,Qc(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await async function(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await _h(e.localStore,t.query,!1).then((({documents:e})=>t.view.da(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Xd(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await _h(e.localStore,t,!0),o=new Od(t,s.hs),a=o.da(s.documents),c=au.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);Xd(e,n,l.fa);const u=new Ld(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&zh(e.remoteStore,i),a}async function Vd(e,t,n){const r=Zo(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!Jc(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bh(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&$h(r.remoteStore,i.targetId),Wd(r,i.targetId)})).catch(ka)):(Wd(r,i.targetId),await bh(r.localStore,i.targetId,!0))}async function jd(e,t){const n=Zo(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$h(n.remoteStore,r.targetId))}async function Bd(e,t){const n=Zo(e);try{const e=await function(e,t){const n=Zo(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(za.EMPTY_BYTE_STRING,ma.min()).withLastLimboFreeSnapshotVersion(ma.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=ol(),c=gl();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(function(e,t,n){let r=gl(),i=gl();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ol();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ma.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ko("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(ma.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Ca.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Jo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Jo(r.wa):e.removedDocuments.size>0&&(Jo(r.wa),r.wa=!1))})),await Zd(n,e,t)}catch(e){await ka(e)}}function qd(e,t,n){const r=Zo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Zo(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.U_)e.j_(t)&&(r=!0)})),r&&Sd(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function zd(e,t,n){const r=Zo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new Ma(_a.comparator);e=e.insert(s,yc.newNoDocument(s,ma.min()));const n=gl().add(s),i=new ou(ma.min(),new Map,new Ma(fa),e,n);await Bd(r,i),r.va=r.va.remove(s),r.Fa.delete(t),Jd(r)}else await bh(r.localStore,t,!1).then((()=>Wd(r,t,n))).catch(ka)}async function $d(e,t){const n=Zo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Zo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ca.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Jo(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=gl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Kd(n,r,null),Hd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zd(n,e)}catch(e){await ka(e)}}async function Gd(e,t,n){const r=Zo(e);try{const e=await function(e,t){const n=Zo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Jo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Kd(r,t,n),Hd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Zd(r,e)}catch(n){await ka(n)}}function Hd(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function Kd(e,t,n){const r=Zo(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Wd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||Qd(e,t)}))}function Qd(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&($h(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Jd(e))}function Xd(e,t,n){for(const r of n)r instanceof Nd?(e.Ma.addReference(r.key,t),Yd(e,r)):r instanceof Rd?(Ko("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||Qd(e,r.key)):Yo()}function Yd(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Ko("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Jd(e))}function Jd(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new _a(va.fromString(t)),r=e.Na.next();e.Fa.set(r,new Dd(n)),e.va=e.va.insert(n,r),zh(e.remoteStore,new Gu(Qc(Gc(n.path)),r,"TargetPurposeLimboResolution",Na.oe))}}async function Zd(e,t,n){const r=Zo(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){const t=e&&!e.fromCache;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){i.push(e);const t=fh.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.h_(i),await async function(e,t){const n=Zo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ca.forEach(t,(t=>Ca.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Ca.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Aa(e))throw e;Ko("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.ns.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(t,i)}}}(r.localStore,s))}async function ef(e,t){const n=Zo(e);if(!n.currentUser.isEqual(t)){Ko("SyncEngine","User change. New user:",t.toKey());const e=await yh(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new ta(ea.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Oa.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Zd(n,e.us)}}function tf(e,t){const n=Zo(e),r=n.Fa.get(t);if(r&&r.wa)return gl().add(r.key);{let e=gl();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}function nf(e){const t=Zo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zd.bind(null,t),t.Sa.h_=Td.bind(null,t.eventManager),t.Sa.ka=xd.bind(null,t.eventManager),t}function rf(e){const t=Zo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$d.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Gd.bind(null,t),t}class sf{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,r){return new mh(e,t,n,r)}(this.persistence,new gh,e.initialUser,this.serializer)}createPersistence(e){return new uh(dh.Hr,this.serializer)}createSharedClientState(e){return new Ih}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class of{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>qd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ef.bind(null,this.syncEngine),await async function(e,t){const n=Zo(e);t?(n.M_.delete(2),await Bh(n)):t||(n.M_.add(2),await qh(n),n.N_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new _d}createDatastore(e){const t=Lh(e.databaseInfo.databaseId),n=function(e){return new Rh(e)}(e.databaseInfo);return function(e,t,n,r){return new Fh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new jh(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>qd(this.syncEngine,e,0)),xh.D()?new xh:new Th)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Pd(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Zo(e);Ko("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await qh(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class af{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Wo("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class cf{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=zo.UNAUTHENTICATED,this.clientId=da.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ko("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ko("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ta(ea.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new na;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=md(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function lf(e,t){e.asyncQueue.verifyOperationInProgress(),Ko("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await yh(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function uf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ko("FirestoreClient","Using user provided OfflineComponentProvider");try{await lf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===ea.FAILED_PRECONDITION||e.code===ea.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),await lf(e,new sf)}}else Ko("FirestoreClient","Using default OfflineComponentProvider"),await lf(e,new sf);return e._offlineComponents}(e);Ko("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>dd(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>dd(t.remoteStore,n))),e._onlineComponents=t}async function hf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ko("FirestoreClient","Using user provided OnlineComponentProvider"),await uf(e,e._uninitializedComponentsProvider._online)):(Ko("FirestoreClient","Using default OnlineComponentProvider"),await uf(e,new of))),e._onlineComponents}async function df(e){const t=await hf(e),n=t.eventManager;return n.onListen=Md.bind(null,t.syncEngine),n.onUnlisten=Vd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ud.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=jd.bind(null,t.syncEngine),n}function ff(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const pf=new Map;function gf(e,t,n){if(!n)throw new ta(ea.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function mf(e){if(!_a.isDocumentKey(e))throw new ta(ea.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function yf(e){if(_a.isDocumentKey(e))throw new ta(ea.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function vf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Yo()}function wf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ta(ea.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vf(e);throw new ta(ea.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class bf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ta(ea.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ta(ea.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ta(ea.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ff(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ta(ea.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ta(ea.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ta(ea.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _f{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ta(ea.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ta(ea.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bf(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ia;switch(e.type){case"firstParty":return new ca(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ta(ea.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pf.get(e);t&&(Ko("ComponentProvider","Removing Datastore"),pf.delete(e),t.terminate())}(this),Promise.resolve()}}class Ef{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ef(this.firestore,e,this._query)}}class If{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new If(this.firestore,e,this._key)}}class Tf extends Ef{constructor(e,t,n){super(e,t,Gc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new If(this.firestore,null,new _a(e))}withConverter(e){return new Tf(this.firestore,e,this._path)}}function xf(e,t,...n){if(e=O(e),gf("collection","path",t),e instanceof _f){const r=va.fromString(t,...n);return yf(r),new Tf(e,null,r)}{if(!(e instanceof If||e instanceof Tf))throw new ta(ea.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(va.fromString(t,...n));return yf(r),new Tf(e.firestore,null,r)}}function Sf(e,t,...n){if(e=O(e),1===arguments.length&&(t=da.newId()),gf("doc","path",t),e instanceof _f){const r=va.fromString(t,...n);return mf(r),new If(e,null,new _a(r))}{if(!(e instanceof If||e instanceof Tf))throw new ta(ea.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(va.fromString(t,...n));return mf(r),new If(e.firestore,e instanceof Tf?e.converter:null,new _a(r))}}class kf{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Dh(this,"async_queue_retry"),this.hu=()=>{const e=Oh();e&&Ko("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=Oh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Oh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new na;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Aa(e))throw e;Ko("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Wo("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=gd.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Yo()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}class Cf extends _f{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new kf,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Nf(this),this._firestoreClient.terminate()}}function Af(e){return e._firestoreClient||Nf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Nf(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Ya(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ff(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new cf(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Rf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rf(za.fromBase64String(e))}catch(e){throw new ta(ea.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Rf(za.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Of{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ta(ea.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ba(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lf{constructor(e){this._methodName=e}}class Df{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ta(ea.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ta(ea.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fa(this._lat,e._lat)||fa(this._long,e._long)}}const Pf=/^__.*__$/;class Mf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ql(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bl(e,this.data,t,this.fieldTransforms)}}class Uf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ql(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ff(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yo()}}class Vf{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Vf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Yf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(Ff(this.fu)&&Pf.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class jf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Lh(e)}Fu(e,t,n,r=!1){return new Vf({fu:e,methodName:t,vu:n,path:ba.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bf(e){const t=e._freezeSettings(),n=Lh(e._databaseId);return new jf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function qf(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Kf("Data must be an object, but it was:",o,r);const a=Gf(r,o);let c,l;if(s.merge)c=new Ba(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Wf(t,r,n);if(!o.contains(i))throw new ta(ea.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Jf(e,i)||e.push(i)}c=new Ba(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Mf(new gc(a),c,l)}class zf extends Lf{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zf}}function $f(e,t){if(Hf(e=O(e)))return Kf("Unsupported field value:",t,e),Gf(e,t);if(e instanceof Lf)return function(e,t){if(!Ff(t.fu))throw t.Du(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Du(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=$f(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=O(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return wl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ga.fromDate(e);return{timestampValue:bu(t.serializer,n)}}if(e instanceof ga){const n=new ga(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bu(t.serializer,n)}}if(e instanceof Df)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Rf)return{bytesValue:_u(t.serializer,e._byteString)};if(e instanceof If){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Tu(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du(`Unsupported field value: ${vf(e)}`)}(e,t)}function Gf(e,t){const n={};return Pa(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Da(e,((e,r)=>{const i=$f(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Hf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ga||e instanceof Df||e instanceof Rf||e instanceof If||e instanceof Lf)}function Kf(e,t,n){if(!Hf(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=vf(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Wf(e,t,n){if((t=O(t))instanceof Of)return t._internalPath;if("string"==typeof t)return Xf(e,t);throw Yf("Field path arguments must be of type string or ",e,!1,void 0,n)}const Qf=new RegExp("[~\\*/\\[\\]]");function Xf(e,t,n){if(t.search(Qf)>=0)throw Yf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Of(...t.split("."))._internalPath}catch(r){throw Yf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Yf(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ta(ea.INVALID_ARGUMENT,a+e+c)}function Jf(e,t){return e.some((e=>e.isEqual(t)))}class Zf{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new If(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ep(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ep extends Zf{data(){return super.data()}}function tp(e,t){return"string"==typeof t?Xf(e,t):t instanceof Of?t._internalPath:t._delegate._internalPath}class np{}class rp extends np{}function ip(e,t,...n){let r=[];t instanceof np&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof ap)).length,n=e.filter((e=>e instanceof sp)).length;if(t>1||t>0&&n>0)throw new ta(ea.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const t of r)e=t._apply(e);return e}class sp extends rp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new sp(e,t,n)}_apply(e){const t=this._parse(e);return up(e._query,t),new Ef(e.firestore,e.converter,Xc(e._query,t))}_parse(e){const t=Bf(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ta(ea.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){lp(o,s);const t=[];for(const n of o)t.push(cp(r,e,n));a={arrayValue:{values:t}}}else a=cp(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||lp(o,s),a=function(e,t,n,r=!1){return $f(n,e.Fu(r?4:3,t))}(n,"where",o,"in"===s||"not-in"===s);return Tc.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function op(e,t,n){const r=t,i=tp("where",e);return sp._create(i,r,n)}class ap extends np{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ap(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:xc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)up(n,e),n=Xc(n,e)}(e._query,t),new Ef(e.firestore,e.converter,Xc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function cp(e,t,n){if("string"==typeof(n=O(n))){if(""===n)throw new ta(ea.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kc(t)&&-1!==n.indexOf("/"))throw new ta(ea.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(va.fromString(n));if(!_a.isDocumentKey(r))throw new ta(ea.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ac(e,new _a(r))}if(n instanceof If)return ac(e,n._key);throw new ta(ea.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vf(n)}.`)}function lp(e,t){if(!Array.isArray(e)||0===e.length)throw new ta(ea.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function up(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ta(ea.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ta(ea.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class hp{convertValue(e,t="none"){switch(ec(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ha(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ka(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Yo()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Da(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Df(Ha(e.latitude),Ha(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Qa(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Xa(e));default:return null}}convertTimestamp(e){const t=Ga(e);return new ga(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=va.fromString(e);Jo($u(n));const r=new Ja(n.get(1),n.get(3)),i=new _a(n.popFirst(5));return r.isEqual(t)||Wo(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function dp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class fp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pp extends Zf{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(tp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class gp extends pp{data(e={}){return super.data(e)}}class mp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new fp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new gp(this._firestore,this._userDataWriter,n.key,n,new fp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ta(ea.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new gp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new fp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new gp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new fp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:yp(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yo()}}function vp(e){e=wf(e,If);const t=wf(e.firestore,Cf);return function(e,t,n={}){const r=new na;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new af({next:s=>{t.enqueueAndForget((()=>Id(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new ta(ea.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new ta(ea.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Ad(Gc(n.path),s,{includeMetadataChanges:!0,ra:!0});return Ed(e,o)}(await df(e),e.asyncQueue,t,n,r))),r.promise}(Af(t),e._key).then((n=>function(e,t,n){const r=n.docs.get(t._key),i=new wp(e);return new pp(e,i,t._key,r,new fp(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n)))}class wp extends hp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new If(this.firestore,null,t)}}function bp(e){e=wf(e,Ef);const t=wf(e.firestore,Cf),n=Af(t),r=new wp(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ta(ea.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),function(e,t,n={}){const r=new na;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new af({next:n=>{t.enqueueAndForget((()=>Id(e,o))),n.fromCache&&"server"===r.source?i.reject(new ta(ea.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Ad(n,s,{includeMetadataChanges:!0,ra:!0});return Ed(e,o)}(await df(e),e.asyncQueue,t,n,r))),r.promise}(n,e._query).then((n=>new mp(t,r,e,n)))}function _p(e,t,n){e=wf(e,If);const r=wf(e.firestore,Cf),i=dp(e.converter,t,n);return Tp(r,[qf(Bf(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ll.none())])}function Ep(e,t,n,...r){e=wf(e,If);const i=wf(e.firestore,Cf),s=Bf(i);let o;return o="string"==typeof(t=O(t))||t instanceof Of?function(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[Wf(t,r,n)],c=[i];if(s.length%2!=0)throw new ta(ea.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)a.push(Wf(t,s[e])),c.push(s[e+1]);const l=[],u=gc.empty();for(let e=a.length-1;e>=0;--e)if(!Jf(l,a[e])){const t=a[e];let n=c[e];n=O(n);const r=o.Su(t);if(n instanceof zf)l.push(t);else{const e=$f(n,r);null!=e&&(l.push(t),u.set(t,e))}}const h=new Ba(l);return new Uf(u,h,o.fieldTransforms)}(s,"updateDoc",e._key,t,n,r):function(e,t,n,r){const i=e.Fu(1,t,n);Kf("Data must be an object, but it was:",i,r);const s=[],o=gc.empty();Da(r,((e,r)=>{const a=Xf(t,e,n);r=O(r);const c=i.Su(a);if(r instanceof zf)s.push(a);else{const e=$f(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Ba(s);return new Uf(o,a,i.fieldTransforms)}(s,"updateDoc",e._key,t),Tp(i,[o.toMutation(e._key,Ll.exists(!0))])}function Ip(e,t){const n=wf(e.firestore,Cf),r=Sf(e),i=dp(e.converter,t);return Tp(n,[qf(Bf(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ll.exists(!1))]).then((()=>r))}function Tp(e,t){return function(e,t){const n=new na;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=rf(e);try{const e=await function(e,t){const n=Zo(e),r=ga.now(),i=t.reduce(((e,t)=>e.add(t.key)),gl());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ol(),c=gl();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Vl(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new ql(e.key,t,mc(t.value.mapValue),Ll.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:ll(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new Ma(fa)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Zd(r,e.changes),await rd(r.remoteStore)}catch(e){const t=md(e,"Failed to persist write");n.reject(t)}}(await function(e){return hf(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(Af(e),t)}new WeakMap,function(e,t=!0){!function(e){$o=e}(We),ze(new L("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new Cf(new oa(e.getProvider("auth-internal")),new ua(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ta(ea.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ja(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),Ye(qo,"4.6.3",e),Ye(qo,"4.6.3","esm2017")}();var xp=Qe({apiKey:"AIzaSyDGYUWfAEDTSLrRqDAKIu5rOpxyNtnBRbA",authDomain:"nfc-project-d1344.firebaseapp.com",databaseURL:"https://nfc-project-d1344-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"nfc-project-d1344",storageBucket:"nfc-project-d1344.appspot.com",messagingSenderId:"805829889154",appId:"1:805829889154:web:31a1a79cf1c4dcebc8389b",measurementId:"G-7XLN4JXLPE"}),Sp=(function(e=Xe()){const t=$e(e=O(e),Xt);t.isInitialized()?t.getImmediate():function(e,t={}){const n=$e(e,Xt);if(n.isInitialized()){const e=n.getImmediate();if(b(t,n.getOptions()))return e;throw rn.create("already-initialized")}n.initialize({options:t})}(e)}(xp),function(e=Xe()){const t=$e(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=$e(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(b(n.getOptions(),null!=t?t:{}))return e;On(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:vs,persistence:[Ui,bi,Ei]}),r=u("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Es)return;const r=null==t?void 0:t.token;Is!==r&&(Is=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){O(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,n,r,i){O(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}}var i;const s=a("auth");return s&&function(e,t,n){const r=Mr(e);Un(r._canInitEmulator,r,"emulator-config-failed"),Un(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=$r(t),{host:o,port:a}=function(e){const t=$r(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Gr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Gr(t)}}}(t),c=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${s}`),n}(xp)),kp=function(e=Xe(),t){const n=$e(e=O(e),Io).getImmediate({identifier:t}),r=c("storage");return r&&function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:d(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(xp),Cp=function(e,t){const n="string"==typeof e?e:"(default)",r=$e("object"==typeof e?e:Xe(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=c("firestore");e&&function(e,t,n,r={}){var i;const s=(e=wf(e,_f))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=zo.MOCK_USER;else{t=d(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ta(ea.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new zo(s)}e._authCredentials=new sa(new ra(t,n))}}(r,...e)}return r}(xp);function Ap(e){return Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(e)}function Np(){Np=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var s=t&&t.prototype instanceof y?t:y,o=Object.create(s.prototype),a=new N(r||[]);return i(o,"_invoke",{value:S(e,n,a)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function w(){}var b={};l(b,o,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(R([])));E&&E!==n&&r.call(E,o)&&(b=E);var I=w.prototype=y.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,s,o,a){var c=h(e[i],e,s);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Ap(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(u).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return s=s?s.then(i,i):i()}})}function S(t,n,r){var i=d;return function(s,o){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?g:f,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=g,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var s=h(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(Ap(t)+" is not iterable")}return v.prototype=w,i(I,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:v,configurable:!0}),v.displayName=l(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},T(x.prototype),l(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new x(u(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(I),l(I,c,"Generator"),l(I,o,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Rp(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function Op(e){switch(e.code){case"auth/wrong-password":alert("Incorrect password. Please try again.");break;case"auth/user-not-found":alert("No user found with this email. Please register first.");break;default:alert("Error logging in: "+e.message)}}function Lp(e){return Lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(e)}function Dp(){Dp=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var s=t&&t.prototype instanceof y?t:y,o=Object.create(s.prototype),a=new N(r||[]);return i(o,"_invoke",{value:S(e,n,a)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function w(){}var b={};l(b,o,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(R([])));E&&E!==n&&r.call(E,o)&&(b=E);var I=w.prototype=y.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,s,o,a){var c=h(e[i],e,s);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Lp(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(u).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return s=s?s.then(i,i):i()}})}function S(t,n,r){var i=d;return function(s,o){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?g:f,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=g,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var s=h(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(Lp(t)+" is not iterable")}return v.prototype=w,i(I,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:v,configurable:!0}),v.displayName=l(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},T(x.prototype),l(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new x(u(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(I),l(I,c,"Generator"),l(I,o,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Pp(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function Mp(e){switch(e.code){case"auth/email-already-in-use":alert("The email address is already in use by another account.");break;case"auth/invalid-email":alert("The email address is not valid.");break;case"auth/operation-not-allowed":alert("Email/password accounts are not enabled.");break;case"auth/weak-password":alert("The password is not strong enough.");break;default:alert("Error registering: "+e.message)}}function Up(e){return Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(e)}function Fp(){Fp=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var s=t&&t.prototype instanceof y?t:y,o=Object.create(s.prototype),a=new N(r||[]);return i(o,"_invoke",{value:S(e,n,a)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function w(){}var b={};l(b,o,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(R([])));E&&E!==n&&r.call(E,o)&&(b=E);var I=w.prototype=y.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,s,o,a){var c=h(e[i],e,s);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Up(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(u).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return s=s?s.then(i,i):i()}})}function S(t,n,r){var i=d;return function(s,o){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?g:f,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=g,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var s=h(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(Up(t)+" is not iterable")}return v.prototype=w,i(I,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:v,configurable:!0}),v.displayName=l(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},T(x.prototype),l(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new x(u(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(I),l(I,c,"Generator"),l(I,o,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Vp(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function jp(){var e;return e=Fp().mark((function e(){var t;return Fp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("gamesContainer"),e.next=3,bp(xf(Cp,"Games"));case 3:e.sent.forEach((function(e){var n=e.data(),r=document.createElement("div");r.classList.add("card"),r.innerHTML='\n      <img src="'.concat(n.gameImg,'" alt="').concat(n.gameTitle,'" />\n      <div class="content">\n        <div class="left">\n          <h5>').concat(n.gameTitle,'</h5>\n          <p><a href="#/details?id=').concat(e.id,'" class="detail-link">Details</a></p>\n        </div>\n      </div>\n    '),t.appendChild(r)}));case 5:case"end":return e.stop()}}),e)})),jp=function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){Vp(s,r,i,o,a,"next",e)}function a(e){Vp(s,r,i,o,a,"throw",e)}o(void 0)}))},jp.apply(this,arguments)}function Bp(e){return Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(e)}function qp(){qp=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var s=t&&t.prototype instanceof y?t:y,o=Object.create(s.prototype),a=new N(r||[]);return i(o,"_invoke",{value:S(e,n,a)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function w(){}var b={};l(b,o,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(R([])));E&&E!==n&&r.call(E,o)&&(b=E);var I=w.prototype=y.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,s,o,a){var c=h(e[i],e,s);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Bp(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(u).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return s=s?s.then(i,i):i()}})}function S(t,n,r){var i=d;return function(s,o){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?g:f,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=g,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var s=h(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(Bp(t)+" is not iterable")}return v.prototype=w,i(I,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:v,configurable:!0}),v.displayName=l(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},T(x.prototype),l(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new x(u(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(I),l(I,c,"Generator"),l(I,o,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function zp(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function $p(e){return $p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(e)}function Gp(){Gp=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var s=t&&t.prototype instanceof y?t:y,o=Object.create(s.prototype),a=new N(r||[]);return i(o,"_invoke",{value:S(e,n,a)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function w(){}var b={};l(b,o,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(R([])));E&&E!==n&&r.call(E,o)&&(b=E);var I=w.prototype=y.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,s,o,a){var c=h(e[i],e,s);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==$p(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(u).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return s=s?s.then(i,i):i()}})}function S(t,n,r){var i=d;return function(s,o){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?g:f,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=g,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var s=h(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError($p(t)+" is not iterable")}return v.prototype=w,i(I,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:v,configurable:!0}),v.displayName=l(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},T(x.prototype),l(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new x(u(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(I),l(I,c,"Generator"),l(I,o,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Hp(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function Kp(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){Hp(s,r,i,o,a,"next",e)}function a(e){Hp(s,r,i,o,a,"throw",e)}o(void 0)}))}}function Wp(){return(Wp=Kp(Gp().mark((function e(t){var n,r,i;return Gp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sf(Cp,"Games",t),e.next=3,vp(n);case 3:(r=e.sent).exists()?(i=r.data(),document.getElementById("game-title").innerText=i.gameTitle,document.getElementById("game-desc").innerText=i.gameDesc,document.getElementById("game-img").src=i.gameImg,Qp(t)):console.log("No such game!");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qp(e){return Xp.apply(this,arguments)}function Xp(){return Xp=Kp(Gp().mark((function e(t){var n,r,i;return Gp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=document.querySelector(".reviews")).innerHTML="",r=ip(xf(Cp,"Reviews"),op("gameId","==",t)),e.next=5,bp(r);case 5:(i=e.sent).forEach((function(e){var t=e.data(),r=document.createElement("div");r.className="review",r.innerHTML="\n      <p>".concat(t.revDesc,"</p>\n      <p>Rating: ").concat(t.recRating,'</p>\n      <button class="edit-review" data-id="').concat(e.id,'">Edit</button>\n      <button class="delete-review" data-id="').concat(e.id,'">Delete</button>\n    '),n.appendChild(r)})),document.querySelectorAll(".delete-review").forEach((function(e){e.addEventListener("click",function(){var e=Kp(Gp().mark((function e(n){var r;return Gp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.target.getAttribute("data-id"),e.next=3,Yp(r,t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),document.querySelectorAll(".edit-review").forEach((function(e){e.addEventListener("click",(function(e){var n=e.target.getAttribute("data-id"),r=i.docs.find((function(e){return e.id===n})).data();eg(n,r,t)}))}));case 9:case"end":return e.stop()}}),e)}))),Xp.apply(this,arguments)}function Yp(e,t){return Jp.apply(this,arguments)}function Jp(){return(Jp=Kp(Gp().mark((function e(t,n){return Gp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tp(wf((r=Sf(Cp,"Reviews",t)).firestore,Cf),[new Hl(r._key,Ll.none())]);case 2:Qp(n);case 3:case"end":return e.stop()}var r}),e)})))).apply(this,arguments)}function Zp(){return(Zp=Kp(Gp().mark((function e(t,n,r){return Gp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ip(xf(Cp,"Reviews"),{gameId:t,revDesc:n,recRating:r});case 2:Qp(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eg(e,t,n){return tg.apply(this,arguments)}function tg(){return(tg=Kp(Gp().mark((function e(t,n,r){var i,s;return Gp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=prompt("Edit your review description:",n.revDesc),s=prompt("Edit your rating (1-5):",n.recRating),null===i||null===s||isNaN(s)){e.next=8;break}return e.next=5,Ep(Sf(Cp,"Reviews",t),{revDesc:i,recRating:parseInt(s)});case 5:Qp(r),e.next=9;break;case 8:alert("Invalid input or cancellation. No changes made.");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ng(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],c=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rg(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rg(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ig={"/":function(){document.getElementById("app").innerHTML='\n  <style> \n  body {\n    background-color: #262b3f;\n    font-family: \'Ubuntu\', sans-serif;\n  }\n  \n  .main {\n    background-color: #1e2337;\n    width: 400px;\n    height: 350px;\n    margin: 7em auto;\n    border-radius: 1.5em;\n    box-shadow: 0px 11px 35px 2px rgba(0, 0, 0, 0.14);\n  }\n  \n  .sign {\n    padding-top: 40px;\n    color: #663da6;\n    font-family: \'Ubuntu\', sans-serif;\n    font-weight: bold;\n    font-size: 23px;\n  }\n  \n  .email {\n    width: 76%;\n    color: #fff;\n    font-weight: 700;\n    font-size: 14px;\n    letter-spacing: 1px;\n    background: rgba(136, 126, 126, 0.04);\n    padding: 10px 20px;\n    border: none;\n    border-radius: 20px;\n    outline: none;\n    box-sizing: border-box;\n    border: 2px solid rgba(0, 0, 0, 0.02);\n    margin-bottom: 50px;\n    margin-left: 46px;\n    text-align: center;\n    margin-bottom: 27px;\n    font-family: \'Ubuntu\', sans-serif;\n  }\n  \n  form.form1 {\n    padding-top: 20px;\n  }\n  \n  .password {\n    width: 76%;\n    color: #fff;\n    font-weight: 700;\n    font-size: 14px;\n    letter-spacing: 1px;\n    background: rgba(136, 126, 126, 0.04);\n    padding: 10px 20px;\n    border: none;\n    border-radius: 20px;\n    outline: none;\n    box-sizing: border-box;\n    border: 2px solid rgba(0, 0, 0, 0.02);\n    margin-bottom: 50px;\n    margin-left: 46px;\n    text-align: center;\n    margin-bottom: 27px;\n    font-family: \'Ubuntu\', sans-serif;\n  }\n  \n  .email:focus, \n  .password:focus {\n    border: 2px solid rgba(0, 0, 0, 0.18) !important;\n  }\n  \n  .submit {\n    cursor: pointer;\n    border-radius: 5em;\n    color: #fff;\n    background: #663da6;\n    border: 0;\n    padding-left: 40px;\n    padding-right: 40px;\n    padding-bottom: 10px;\n    padding-top: 10px;\n    font-family: \'Ubuntu\', sans-serif;\n    margin-left: 35%;\n    font-size: 13px;\n    box-shadow: 0 0 20px 1px rgba(0, 0, 0, 0.04);\n  }\n  \n  .forgot {\n    text-shadow: 0px 0px 3px rgba(117, 117, 117, 0.12);\n    color: #663da6;\n    padding-top: 15px;\n  }\n  \n  a {\n    text-shadow: 0px 0px 3px rgba(117, 117, 117, 0.12);\n    color: #663da6;\n    text-decoration: none;\n  }\n  \n  @media (max-width: 600px) {\n    .main {\n      border-radius: 0px;\n    }\n  } \n  </style>\n    <div class="main">\n      <p class="sign" align="center">Login</p>\n      <form class="form1" id="login-form">\n        <input class="email" type="email" id="login-email" align="center" placeholder="Email" required aria-label="Email">\n        <input class="password" type="password" id="login-password" align="center" placeholder="Password" required aria-label="Password">\n        <button class="submit" type="submit" align="center">Login</button>\n        <p class="forgot" align="center"><a href="#/register">Don\'t have an account?</a></p>\n      </form>\n    </div>\n  ';var e=document.getElementById("login-form"),t=document.getElementById("login-email"),n=document.getElementById("login-password");e.addEventListener("submit",function(){var e,r=(e=Np().mark((function e(r){var i,s;return Np().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),i=t.value,s=n.value,e.prev=3,e.next=6,mi(Sp,i,s);case 6:alert("Login successful"),window.location.href="#/home",e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Op(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){Rp(s,r,i,o,a,"next",e)}function a(e){Rp(s,r,i,o,a,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}())},"/register":function(){document.getElementById("app").innerHTML='\n  <style> \n  body {\n    background-color: #262b3f;\n    font-family: \'Ubuntu\', sans-serif;\n  }\n  .main {\n    background-color: #1e2337;\n    width: 400px;\n    height: 680px;\n    margin: 5em auto;\n    border-radius: 1.5em;\n    box-shadow: 0px 11px 35px 2px rgba(0, 0, 0, 0.14);\n  }\n  .sign {\n    padding-top: 40px;\n    color: #663da6;\n    font-family: \'Ubuntu\', sans-serif;\n    font-weight: bold;\n    font-size: 23px;\n    text-align: center;\n  }\n  .userName, .fullName, .password, .email {\n    width: 76%;\n    color: #fff;\n    font-weight: 700;\n    font-size: 14px;\n    letter-spacing: 1px;\n    background: rgba(136, 126, 126, 0.04);\n    padding: 10px 20px;\n    border: none;\n    border-radius: 20px;\n    outline: none;\n    box-sizing: border-box;\n    border: 2px solid rgba(0, 0, 0, 0.02);\n    margin-bottom: 15px;\n    margin-left: 46px;\n    text-align: center;\n    font-family: \'Ubuntu\', sans-serif;\n  }\n  form.form1 {\n    padding-top: 20px;\n  }\n  .userName:focus, .fullName:focus, .password:focus, .email:focus {\n    border: 2px solid rgba(0, 0, 0, 0.18) !important;\n  }\n  .submit {\n    cursor: pointer;\n    border-radius: 5em;\n    color: #fff;\n    background: #663da6;\n    border: 0;\n    padding-left: 40px;\n    padding-right: 40px;\n    padding-bottom: 10px;\n    padding-top: 10px;\n    font-family: \'Ubuntu\', sans-serif;\n    margin-left: 34%;\n    margin-top: 10px;\n    font-size: 13px;\n    box-shadow: 0 0 20px 1px rgba(0, 0, 0, 0.04);\n  }\n  .profile-pic {\n    display: block;\n    width: 90px;\n    height: 90px;\n    border-radius: 50%;\n    object-fit: cover;\n    margin: 1px auto;\n    cursor: pointer;\n    padding-bottom: 25px;\n  }\n  #file-upload {\n    opacity: 0;\n    position: absolute;\n    z-index: -1;\n  }\n  .forgot {\n    text-shadow: 0px 0px 3px rgba(117, 117, 117, 0.12);\n    color: #663da6;\n    padding-top: 15px;\n    text-align: center;\n  }\n  a {\n    text-shadow: 0px 0px 3px rgba(117, 117, 117, 0.12);\n    color: #663da6;\n    text-decoration: none;\n  }\n  @media (max-width: 600px) {\n    .main {\n      border-radius: 0px;\n    }\n  }\n  </style>\n    <div class="main">\n      <p class="sign" align="center">Register</p>\n      <form class="form1" id="register-form">\n        <img src="../images/default.png" class="profile-pic" id="profile-pic" alt="Profile Picture">\n        <input type="file" id="file-upload" accept="image/*">\n        <input class="userName" type="text" id="register-name" align="center" placeholder="Username" required aria-label="Username">\n        <input class="email" type="email" id="register-email" align="center" placeholder="Email" required aria-label="Email">\n        <input class="password" type="password" id="register-password" align="center" placeholder="Password" required aria-label="Password">\n        <button class="submit" type="submit" align="center">Register</button>\n        <p class="forgot" align="center"><a href="#/">Already have an account?</a></p>\n      </form>\n    </div>\n  ';var e=document.getElementById("register-form"),t=document.getElementById("register-name"),n=document.getElementById("register-email"),r=document.getElementById("register-password"),i=document.getElementById("profile-pic"),s=document.getElementById("file-upload");i.addEventListener("click",(function(){s.click()})),s.addEventListener("change",(function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(e){i.src=e.target.result},n.readAsDataURL(t)}})),e.addEventListener("submit",function(){var e,i=(e=Dp().mark((function e(i){var o,a,c,l,u,h,d,f;return Dp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.preventDefault(),o=n.value,a=r.value,c=t.value,l=s.files[0],e.prev=5,e.next=8,gi(Sp,o,a);case 8:if(u=e.sent,h=u.user,d="",!l){e.next=18;break}return f=So(kp,"user_profile/".concat(h.uid)),e.next=15,To(f,l);case 15:return e.next=17,xo(f);case 17:d=e.sent;case 18:return e.next=20,_p(Sf(Cp,"user-profile",h.uid),{username:c,profilePic:d,email:o});case 20:alert("Registration successful"),window.location.href="#/home",e.next=27;break;case 24:e.prev=24,e.t0=e.catch(5),Mp(e.t0);case 27:case"end":return e.stop()}}),e,null,[[5,24]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){Pp(s,r,i,o,a,"next",e)}function a(e){Pp(s,r,i,o,a,"throw",e)}o(void 0)}))});return function(e){return i.apply(this,arguments)}}())},"/home":function(){document.getElementById("app").innerHTML='\n  <style>\n  /* Google Fonts \'Poppins */\n  @import url(\'https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\');\n  \n  /* CSS reset */\n  * {\n    padding: 0;\n    margin: 0;\n    box-sizing: border-box;\n  }\n  \n  /* Color root */\n  :root {\n    --color-1: #262b3f;\n    --color-2: #fff;\n    --color-3: #1e2337;\n    --color-4: rgba(255, 255, 255, 0.5);\n    --color-5: greenyellow;\n  }\n  \n  body {\n    width: 100%;\n    height: 100vh;\n    background: #1e2337;\n    font-family: \'Poppins\', sans-serif;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden; /* Prevent scrolling */\n  }\n  \n  header {\n    width: 85%;\n    height: 95%;\n    box-shadow: 0 0 30px rgba(20, 19, 19, 1);\n    border-radius: 10px;\n    display: flex;\n  }\n  \n  header aside,\n  article {\n    height: 100%;\n    background: var(--color-3);\n    overflow: hidden; /* Prevent scrolling within the card */\n  }\n  \n  header aside {\n    width: 15%;\n    border-radius: 10px 0 0 10px;\n    background: #663da6;\n  }\n  \n  header aside h1 {\n    height: 10%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #fff;\n    font-size: 22px;\n    font-weight: 800;\n  }\n  \n  header aside h1 i {\n    margin-left: 5px;\n  }\n  \n  header aside button {\n    display: block;\n    padding: 8px 20px;\n    margin: 5px auto;\n    border: none;\n    cursor: pointer;\n    font-size: 12px;\n    background: #270458;\n    color: #fff;\n    transition: 0.3s linear;\n  }\n  \n  header aside button:hover {\n    background: #1e2337;\n  }\n  \n  header aside ul {\n    margin-top: 10px;\n    list-style-type: none;\n    padding-bottom: 20px;\n  }\n  \n  header aside ul::before {\n    content: \'\';\n    position: absolute;\n    width: 88%;\n    height: 2px;\n    background: rgba(184, 184, 184, 0.1);\n    bottom: 0;\n  }\n  \n  header aside ul li {\n    padding: 2.5px 0;\n  }\n  \n  header aside ul li a {\n    text-decoration: none;\n    color: rgba(255, 255, 255, 0.7);\n    font-size: 12px;\n    transition: 0.3s linear;\n  }\n  \n  header aside ul li a:hover {\n    color: #fff;\n  }\n  \n  header aside ul li a i {\n    margin-right: 15px;\n  }\n  \n  /* List item active */\n  header aside ul .active_li {\n    border-right: 3px solid #fff;\n  }\n  \n  header aside ul .active_li a {\n    color: #fff;\n    font-size: 13px;\n  }\n  \n  header article {\n    width: 85%;\n    border-radius: 0 10px 10px 0;\n  }\n  \n  /* Navigation */\n  header article nav {\n    width: 100%;\n    height: 9%;\n    padding: 0 30px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    background: var(--color-1);\n  }\n  \n  header article nav button {\n    padding: 7px 20px;\n    border-radius: 5px;\n    border: none;\n    background: #663da6;\n    color: #fff;\n    font-family: \'Poppins\', sans-serif;\n  }\n  \n  header article nav .search {\n    width: 40%;\n    background: var(--color-3);\n    padding: 4px 10px;\n    transition: 0.5s linear;\n  }\n  \n  header article nav .search input {\n    width: 95%;\n    background: none;\n    border: none;\n    outline: none;\n    padding: 0 10px;\n    color: var(--color-2);\n    transition: 0.5s linear;\n  }\n  \n  header article nav .search input::placeholder {\n    color: var(--color-4);\n    font-family: \'Poppins\', sans-serif;\n    font-size: 12px;\n    transition: 0.5s linear;\n  }\n  \n  header article nav .search i {\n    color: var(--color-4);\n    font: 13px;\n    transition: 0.5s linear;\n  }\n  \n  header article nav .right_bx {\n    width: 38%;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n  \n  header article nav .right_bx i {\n    color: var(--color-4);\n    font-size: 20px;\n    cursor: pointer;\n    transition: 0.5s linear;\n  }\n  \n  header article nav .right_bx i:hover {\n    color: #fff;\n  }\n  \n  header article nav .right_bx button {\n    padding: 0 20px;\n    background: rgba(184, 184, 184, 0.2);\n    border: 2px solid rgba(255, 255, 255, 0.2);\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    color: #fff;\n    transition: 0.5s linear;\n  }\n  \n  header article nav .right_bx button span {\n    margin: -2px 0 0 10px;\n  }\n  \n  /* Battery active class */\n  header article nav .right_bx .active_battery {\n    background: #663da6;\n    box-shadow: 0 0 20px #663da6;\n  }\n  \n  header article nav .right_bx .user_data {\n    position: relative;\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    transition: 0.5s linear;\n  }\n  \n  header article nav .right_bx .user_data h6 {\n    width: 70px;\n    color: var(--color-4);\n    font-weight: 600;\n    font-size: 9px;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n    transition: 0.5s linear;\n  }\n  \n  header article nav .right_bx .user_data h5 {\n    color: #fff;\n    background: #663da6;\n    border-radius: 50%;\n    padding: 8px 9px;\n    font-size: 11px;\n    margin: 0 5px;\n    transition: 0.5s linear;\n  }\n  \n  header article nav .right_bx .user_data i {\n    color: var(--color-2);\n    font-size: 12px;\n    transition: 0.7s linear;\n  }\n  \n  header article nav .right_bx .user_data:hover i {\n    transform: rotate(180deg);\n  }\n  \n  header article nav .right_bx .user_data .card {\n    position: absolute;\n    width: 130px;\n    height: 0;\n    top: 50px;\n    z-index: 9999;\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    overflow: hidden;\n    opacity: 0;\n    transition: 1s linear;\n  }\n  \n  header article nav .right_bx .user_data:hover .card {\n    height: 200px;\n    opacity: 1;\n    overflow: unset;\n  }\n  \n  header article nav .right_bx .user_data .card::before {\n    content: \'\';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: rgba(184, 184, 184, 0.1);\n    backdrop-filter: blur(5px);\n    border-radius: 10px;\n    z-index: -1;\n  }\n  \n  header article nav .right_bx .user_data .card::after {\n    content: \'\';\n    position: absolute;\n    border-top: 15px solid rgba(184, 184, 184, 0.1);\n    border-right: 15px solid transparent;\n    border-bottom: 15px solid transparent;\n    top: -10px;\n    right: 20px;\n    transform: rotate(45deg);\n  }\n  \n  header article nav .right_bx .user_data .card img {\n    width: 35px;\n    height: 35px;\n    border-radius: 50%;\n    margin-top: 10px;\n  }\n  \n  header article nav .right_bx .user_data .card h6 {\n    width: unset;\n    overflow: unset;\n    text-align: center;\n    display: block;\n    margin-top: 10px;\n    color: #fff;\n    transition: 0.5s linear;\n  }\n  \n  header article nav .right_bx .user_data .card p {\n    font-size: 9px;\n    color: rgba(255, 255, 255, 0.5);\n    margin-bottom: 10px;\n    transition: 0.5s linear;\n  }\n  \n  header article nav .right_bx .user_data .card .card_gta_img {\n    width: 110px;\n    height: 60px;\n    border-radius: 15px;\n    margin: 15px;\n  }\n  \n  /* Game Box Start */\n  header article .game1 {\n    position: relative;\n    width: 100%;\n    height: 200px;\n    padding: 0 30px;\n    margin-top: 20px;\n  }\n  \n  header article .game1 h3 {\n    color: var(--color-2);\n    font-size: 14px;\n    font-weight: 600;\n    transition: 0.5s linear;\n  }\n  \n  header article .game1 .game_bx {\n    width: 100%;\n    height: 175px;\n    display: flex;\n    align-items: center;\n    overflow: auto;\n    scroll-behavior: smooth;\n  }\n  \n  header article .game1 .game_bx::-webkit-scrollbar {\n    display: none;\n  }\n  \n  header article .game1 .game_bx .card {\n    min-width: 230px;\n    height: 160px;\n    border-radius: 10px;\n    margin: 10px 20px 10px 0;\n  }\n  \n  header article .game1 .game_bx .card:nth-last-child(1) {\n    margin-right: 0;\n  }\n  \n  header article .game1 .game_bx .card .content {\n    width: 100%;\n    height: 25%;\n    display: flex;\n    justify-content: space-between;\n    color: var(--color-2);\n    margin-top: -5px;\n    transition: 0.5s linear;\n  }\n  \n  header article .game1 .game_bx .card .content .left {\n    color: var(--color-2);\n    transition: 0.5s linear;\n  }\n  \n  header article .game1 .game_bx .card .content .left h5 {\n    font-size: 12px;\n    font-weight: 500;\n    width: 150px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  \n  header article .game1 .game_bx .card .content .left p {\n    font-size: 8px;\n    font-weight: 500;\n    width: 150px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    color: var(--color-4);\n  }\n  \n  header article .game1 .game_bx .card .content h6 {\n    font-size: 10px;\n    font-weight: 500;\n    color: var(--color-4);\n    margin-top: 5px;\n    transition: 0.5s linear;\n  }\n  \n  header article .game1 .btns {\n    position: absolute;\n    right: 3%;\n    top: 0;\n    display: flex;\n    align-items: center;\n    color: var(--color-4);\n    transition: 0.5s linear;\n  }\n  \n  header article .game1 .btns i {\n    margin-left: 5px;\n    cursor: pointer;\n    transition: 0.5s linear;\n  }\n  \n  header article .game1 .btns i:hover {\n    color: var(--color-2);\n  }\n  \n  header article .game2 {\n    position: relative;\n    width: 100%;\n    height: 380px;\n    padding: 0 30px;\n    overflow: hidden;\n  }\n  \n  header article .game2 h3 {\n    color: var(--color-2);\n    font-size: 14px;\n    font-weight: 600;\n    transition: 0.5s linear;\n  }\n  \n  header article .game2 .games_bx {\n    width: 100%;\n    height: 350px;\n    margin-top: 8px;\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n    overflow-y: auto;\n  }\n  \n  header article .game2 .games_bx::-webkit-scrollbar {\n    width: 5px;\n    border-radius: 20px;\n    background: rgba(184, 184, 184, 0.2);\n    visibility: hidden;\n  }\n  \n  header article .game2 .games_bx::-webkit-scrollbar-thumb {\n    border-radius: 20px;\n    background: rgba(184, 184, 184, 0.7);\n    visibility: hidden;\n  }\n  \n  header article .game2 .games_bx:hover::-webkit-scrollbar {\n    visibility: visible;\n  }\n  \n  header article .game2 .games_bx:hover::-webkit-scrollbar-thumb {\n    visibility: visible;\n  }\n  \n  header article .game2 .games_bx .card {\n    width: 100px;\n    height: 170px;\n    margin: 0 5px 11px 0;\n  }\n  \n  header article .game2 .games_bx .card .content {\n    width: 100%;\n    height: 20%;\n    overflow: hidden;\n  }\n  \n  header article .game2 .games_bx .card .content h6 {\n    width: 100%;\n    color: var(--color-2);\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n    transition: 0.5s linear;\n  }\n  /* Ensure full height for body and html */\nhtml, body {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  font-family: \'Poppins\', sans-serif;\n  background: #1e2337;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* Container for the entire app */\n#app {\n  width: 100%;\n  height: 100%;\n}\n\n/* Styles for header and its child elements */\nheader {\n  width: 85%;\n  height: 95%;\n  display: flex;\n  box-shadow: 0 0 30px rgba(20, 19, 19, 1);\n  border-radius: 10px;\n  overflow: hidden;\n}\n\n/* Styles for aside section */\nheader aside {\n  width: 15%;\n  background: #663da6;\n  padding: 1rem;\n  box-sizing: border-box;\n}\n\nheader aside h1 {\n  color: #fff;\n  font-size: 22px;\n  font-weight: 800;\n  text-align: center;\n  margin-bottom: 1rem;\n}\n\nheader aside ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\nheader aside ul li {\n  margin-bottom: 1rem;\n}\n\nheader aside ul li a {\n  color: rgba(255, 255, 255, 0.7);\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  transition: color 0.3s;\n}\n\nheader aside ul li a i {\n  margin-right: 10px;\n}\n\nheader aside ul li a:hover {\n  color: #fff;\n}\n\nheader aside ul .active_li a {\n  color: #fff;\n}\n\n/* Styles for article section */\nheader article {\n  width: 85%;\n  background: var(--color-3);\n  display: flex;\n  flex-direction: column;\n}\n\nheader article nav {\n  width: 100%;\n  padding: 0 1.5rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: var(--color-1);\n  height: 9%;\n}\n\nheader article nav .search {\n  display: flex;\n  align-items: center;\n  width: 40%;\n  padding: 0.5rem;\n  background: var(--color-3);\n}\n\nheader article nav .search input {\n  flex: 1;\n  background: none;\n  border: none;\n  color: var(--color-2);\n  outline: none;\n}\n\nheader article nav .search input::placeholder {\n  color: var(--color-4);\n}\n\nheader article nav .right_bx {\n  display: flex;\n  align-items: center;\n}\n\nheader article nav .right_bx i, \nheader article nav .right_bx button {\n  margin-left: 1rem;\n}\n\nheader article .game1, \nheader article .game2 {\n  padding: 1rem;\n}\n\nheader article .game1 h3,\nheader article .game2 h3 {\n  color: var(--color-2);\n  margin-bottom: 1rem;\n}\n\nheader article .game1 .game_bx,\nheader article .game2 .games_bx {\n  display: flex;\n  overflow-x: auto;\n  padding-bottom: 1rem;\n}\n\nheader article .game1 .game_bx .card,\nheader article .game2 .games_bx .card {\n  background: var(--color-3);\n  border-radius: 10px;\n  margin-right: 1rem;\n  overflow: hidden;\n  flex-shrink: 0;\n}\n\nhtml, body {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  font-family: \'Poppins\', sans-serif;\n  background: #1e2337;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n#app {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n}\n\nheader {\n  width: 85%;\n  height: 95%;\n  display: flex;\n  box-shadow: 0 0 30px rgba(20, 19, 19, 1);\n  border-radius: 10px;\n  overflow: hidden;\n  /* Centering the header */\n  align-items: center;\n  justify-content: center;\n}\n\n/* Adjusting aside and article to fit within the centered header */\nheader aside {\n  width: 15%;\n  background: #663da6;\n  padding: 1rem;\n  box-sizing: border-box;\n}\n\nheader aside h1 {\n  color: #fff;\n  font-size: 22px;\n  font-weight: 800;\n  text-align: center;\n  margin-bottom: 1rem;\n}\n\nheader aside ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\nheader aside ul li {\n  margin-bottom: 1rem;\n}\n\nheader aside ul li a {\n  color: rgba(255, 255, 255, 0.7);\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  transition: color 0.3s;\n}\n\nheader aside ul li a i {\n  margin-right: 10px;\n}\n\nheader aside ul li a:hover {\n  color: #fff;\n}\n\nheader aside ul .active_li a {\n  color: #fff;\n}\n\nheader article {\n  width: 85%;\n  background: var(--color-3);\n  display: flex;\n  flex-direction: column;\n}\n\nheader article nav {\n  width: 100%;\n  padding: 0 1.5rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: var(--color-1);\n  height: 9%;\n}\n\nheader article nav .search {\n  display: flex;\n  align-items: center;\n  width: 40%;\n  padding: 0.5rem;\n  background: var(--color-3);\n}\n\nheader article nav .search input {\n  flex: 1;\n  background: none;\n  border: none;\n  color: var(--color-2);\n  outline: none;\n}\n\nheader article nav .search input::placeholder {\n  color: var(--color-4);\n}\n\nheader article nav .right_bx {\n  display: flex;\n  align-items: center;\n}\n\nheader article nav .right_bx i, \nheader article nav .right_bx button {\n  margin-left: 1rem;\n}\n\nheader article .game1, \nheader article .game2 {\n  padding: 1rem;\n}\n\nheader article .game1 h3,\nheader article .game2 h3 {\n  color: var(--color-2);\n  margin-bottom: 1rem;\n}\n\nheader article .game1 .game_bx,\nheader article .game2 .games_bx {\n  display: flex;\n  overflow-x: auto;\n  padding-bottom: 1rem;\n}\n\nheader article .game1 .game_bx .card,\nheader article .game2 .games_bx .card {\n  background: var(--color-3);\n  border-radius: 10px;\n  margin-right: 1rem;\n  overflow: hidden;\n  flex-shrink: 0;\n}\n\nheader article .game1 .game_bx .card img,\nheader article .game2 .games_bx .card img {\n  width: 100%;\n  height: auto;\n  display: block;\n}\n\nheader article .game1 {\n  position: relative;\n  width: 100%;\n  height: 200px;\n  /* border: 1px solid #fff; */\n  padding: 0px 30px;\n  margin-top: 20px;\n}\n\nheader article .game1 h3 {\n  color: var(--color-2);\n  font-size: 14px;\n  font-weight: 600;\n  transition: 0.5s linear;\n}\n\nheader article .game1 .game_bx {\n  width: 100%;\n  height: 175px;\n  /* border: 1px solid #fff; */\n  display: flex;\n  align-items: center;\n  overflow: auto;\n  scroll-behavior: smooth;\n}\n\nheader article .game1 .game_bx::-webkit-scrollbar {\n  display: none;\n}\n\nheader article .game1 .game_bx .card {\n  min-width: 230px;\n  height: 160px;\n  /* border: 1px solid #fff; */\n  border-radius: 10px;\n  margin-top: 10px;\n  margin-right: 20px;\n}\n\nheader article .game1 .game_bx .card:nth-last-child(1) {\n  margin-right: 0px;\n}\n\nheader article .game1 .game_bx .card img {\n  width: 100%;\n  height: 70%;\n  border-radius: 5px;\n}\n\nheader article .game1 .game_bx .card .content {\n  width: 100%;\n  height: 25%;\n  /* border: 1px solid #fff; */\n  display: flex;\n  justify-content: space-between;\n  color: var(--color-2);\n  margin-top: -5px;\n  transition: 0.5s linear;\n}\n\nheader article .game1 .game_bx .card .content .left {\n  color: var(--color-2);\n  transition: 0.5s linear;\n}\n\nheader article .game1 .game_bx .card .content .left h5 {\n  font-size: 12px;\n  font-weight: 500;\n  width: 150px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\nheader article .game1 .game_bx .card .content .left p {\n  font-size: 8px;\n  font-weight: 500;\n  width: 150px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: var(--color-4);\n}\n\nheader article .game1 .game_bx .card .content h6 {\n  font-size: 10px;\n  font-weight: 500;\n  color: var(--color-4);\n  margin-top: 5px;\n  transition: 0.5s linear;\n}\n\nheader article .game1 .btns {\n  position: absolute;\n  right: 3%;\n  top: 0;\n  display: flex;\n  align-items: center;\n  color: var(--color-4);\n  transition: 0.5s linear;\n}\n\nheader article .game1 .btns i {\n  margin-left: 5px;\n  cursor: pointer;\n  transition: 0.5s linear;\n}\n\nheader article .game1 .btns i:hover {\n  color: var(--color-2);\n}\n\nheader article .game2 {\n  position: relative;\n  width: 100%;\n  height: 380px;\n  /* border: 1px solid #fff; */\n  padding: 0px 30px;\n  overflow: hidden;\n}\n\nheader article .game2 h3 {\n  color: var(--color-2);\n  font-size: 14px;\n  font-weight: 600;\n  transition: 0.5s linear;\n}\n\nheader article .game2 .games_bx {\n  width: 100%;\n  height: 350px;\n  margin-top: 8px;\n  /* border: 1px solid #fff; */\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  overflow-y: auto;\n}\n\nheader article .game2 .games_bx::-webkit-scrollbar {\n  width: 5px;\n  border-radius: 20px;\n  background: rgb(184, 184, 184, 0.2);\n  visibility: hidden;\n}\n\nheader article .game2 .games_bx::-webkit-scrollbar-thumb {\n  border-radius: 20px;\n  background: rgb(184, 184, 184, 0.7);\n  visibility: hidden;\n}\nheader article .game2 .games_bx:hover::-webkit-scrollbar {\n  visibility: visible;\n}\nheader article .game2 .games_bx:hover::-webkit-scrollbar-thumb {\n  visibility: visible;\n}\n\nheader article .game2 .games_bx .card {\n  width: 100px;\n  height: 170px;\n  /* border: 1px solid #fff; */\n  margin: 0px 5px 11px 0px;\n}\n\nheader article .game2 .games_bx .card img {\n  width: 100%;\n  height: 80%;\n  border-radius: 10px;\n}\n\nheader article .game2 .games_bx .card .content {\n  width: 100%;\n  height: 20%;\n  overflow: hidden;\n}\nheader article .game2 .games_bx .card .content h6 {\n  width: 100%;\n  color: var(--color-2);\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  transition: 0.5s linear;\n}\n  </style>\n  \n  <header>\n  <aside>\n    <h1>Game <i class="bi bi-joystick"></i></h1>\n    <ul>\n      <li class="active_li">\n        <a href="#"><i class="bi bi-archive-fill"></i> Browse</a>\n      </li>\n      <li>\n        <a href="#"><i class="bi bi-clipboard-check-fill"></i> Channels</a>\n      </li>\n      <li>\n        <a href="#"><i class="bi bi-people-fill"></i> Friends</a>\n      </li>\n      <li>\n        <a href="#"><i class="bi bi-controller"></i> Delete Games</a>\n      </li>\n      <li>\n        <a href="#/add"><i class="bi bi-bookmark-check-fill"></i> Add Games</a>\n      </li>\n    </ul>\n  </aside>\n  <article>\n    <nav>\n      <div class="search">\n        <input type="text" placeholder="Search..." />\n        <i class="bi bi-search"></i>\n      </div>\n      <div class="right_bx">\n        <i class="bi bi-moon-fill" id="day_night"></i>\n        <i class="bi bi-brightness-high-fill" id="day_night2"></i>\n        <i class="bi bi-wifi" id="wifi"></i>\n        <i class="bi bi-gear-fill"></i>\n        <button id="active_battery"><i class="bi bi-battery-half" id="battery_icon"></i> <span id="battery_level">84%</span></button>\n        <div class="user_data">\n          <h6>userName</h6>\n          <h5>uN</h5> \x3c!--userName Abbreviation--\x3e\n          <i class="bi bi-caret-down-fill"></i>\n          <div class="card">\n            <img src="" /> \x3c!--userName Pfp--\x3e\n            <h6>userName</h6>\n            <p>gameTitle</p> \x3c!--recent Review--\x3e\n            <img class="card_game_img" /> \x3c!--corresponding gameImg--\x3e\n            <p class="logout" align="center"><a href="#/">Logout</a></p>\n          </div>\n        </div>\n      </div>\n    </nav>\n    \x3c!-- Game Box Start --\x3e\n\n    <div class="game2">\n      <h3>Most Played</h3>\n      <div class="games_bx">\n        <section id="gamesContainer"></section>\n      </div>\n    </div>\n\n  </article>\n  </header>\n  ';var e=document.getElementById("day_night"),t=document.getElementById("day_night2");t.style.display="none",e.addEventListener("click",(function(){document.documentElement.style.setProperty("--color-1","rgb(184,184,184,.5)"),document.documentElement.style.setProperty("--color-2","#000"),document.documentElement.style.setProperty("--color-3","#fff"),document.documentElement.style.setProperty("--color-4","rgb(0,0,0,.5)"),document.documentElement.style.setProperty("--color-5","#663da6"),e.style.display="none",t.style.display="unset"})),t.addEventListener("click",(function(){document.documentElement.style.setProperty("--color-1","#262b3f"),document.documentElement.style.setProperty("--color-2","#fff"),document.documentElement.style.setProperty("--color-3","#1e2337"),document.documentElement.style.setProperty("--color-4","rgb(255,255,255,.5)"),document.documentElement.style.setProperty("--color-5","greenyellow"),e.style.display="unset",t.style.display="none"}));var n=document.getElementById("active_battery"),r=document.getElementById("battery_icon"),i=document.getElementById("battery_level");navigator.getBattery().then((function(e){var t=function(){i.innerText=100*e.level+"%"};setInterval(t,1e3),t(),r.value=e.charging,e.addEventListener("chargingchange",(function(){switch(e.charging){case!0:r.classList.remove("bi-battery-half"),r.classList.add("bi-battery-charging"),n.classList.add("active_battery"),r.style.color="#fff";break;case!1:r.classList.add("bi-battery-half"),r.classList.remove("bi-battery-charging"),n.classList.remove("active_battery"),r.style.color="unset"}}))}));var s=document.getElementById("wifi"),o=function(){navigator.onLine?s.style.color="var(--color-5)":s.style.color=""};setInterval(o,100),o(),function(){jp.apply(this,arguments)}()},"/add":function(){document.getElementById("app").innerHTML='\n  <style> \n  * {\n  background-color: #262b3f;\n  \n  font-family: \'Ubuntu\', sans-serif;\n}\n\n#game-form {\n  background-color: #1e2337;\n  width: 400px;\n  max-width: 440px; /* Allow up to 10% stretch */\n  height: auto; /* Let the height adjust based on content */\n  margin: 5em auto;\n  border-radius: 1.5em;\n  box-shadow: 0px 11px 35px 2px rgba(0, 0, 0, 0.14);\n  padding: 20px; /* Added padding to the form */\n  box-sizing: border-box; /* Ensure padding is included in the width and height */\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\nh1 {\n  background-color: transparent;\n  padding-top: 20px;\n  color: #663da6;\n  font-family: \'Ubuntu\', sans-serif;\n  font-weight: bold;\n  font-size: 23px;\n  text-align: center;\n}\n\n#game-title,\n#game-desc {\n  width: 76%;\n  color: #fff;\n  font-weight: 700;\n  font-size: 14px;\n  letter-spacing: 1px;\n  background: rgba(136, 126, 126, 0.04);\n  padding: 10px 20px;\n  border: none;\n  border-radius: 20px;\n  outline: none;\n  box-sizing: border-box;\n  border: 2px solid rgba(0, 0, 0, 0.02);\n  margin-bottom: 15px;\n  text-align: center;\n  font-family: \'Ubuntu\', sans-serif;\n}\n\n#game-title:focus,\n#game-desc:focus {\n  border: 2px solid rgba(0, 0, 0, 0.18) !important;\n}\n\nbutton {\n  cursor: pointer;\n  border-radius: 5em;\n  color: #fff;\n  background: #663da6;\n  border: 0;\n  padding-left: 40px;\n  padding-right: 40px;\n  padding-bottom: 10px;\n  padding-top: 10px;\n  font-family: \'Ubuntu\', sans-serif;\n  margin-top: 10px;\n  font-size: 13px;\n  box-shadow: 0 0 20px 1px rgba(0, 0, 0, 0.04);\n}\n\n.profile-pic {\n  display: block;\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin: 1px auto;\n  cursor: pointer;\n}\n\na {\n  text-shadow: 0px 0px 3px rgba(117, 117, 117, 0.12);\n  color: #663da6;\n  text-decoration: none;\n}\n\n@media (max-width: 600px) {\n  #game-form {\n    width: 90%;\n    max-width: 100%; /* Remove the max-width constraint on small screens */\n    border-radius: 0;\n  }\n}\n\n.image-upload {\n  position: relative;\n  border-radius: 20px;\n  width: 76%;\n  margin: 20px 0; /* Reduced margin to fit better in the form */\n}\n\n#game-img {\n  display: none;\n}\n\n#image-label {\n  display: block;\n  width: 100%;\n  height: 200px;\n  background: rgba(136, 126, 126, 0.04);\n  border: 2px solid rgba(0, 0, 0, 0.02);\n  border-radius: 20px;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 700;\n  font-size: 14px;\n  color: #fff;\n  letter-spacing: 1px;\n  text-align: center;\n}\n\n#display-image {\n  width: 100%;\n  height: 100%;\n  border-radius: 20px;\n  object-fit: cover;\n}\n  </style>\n    <form id="game-form">\n    <h1>Add New Game</h1>\n    <div class="image-upload">\n      <input type="file" id="game-img" accept="image/*" required />\n      <label for="game-img" id="image-label">Choose Image</label>\n      <img id="display-image" src="" alt="Game Image" style="display: none;" />\n    </div>\n    <input type="text" id="game-title" placeholder="Game Title" required />\n    <textarea id="game-desc" placeholder="Game Description" required></textarea>\n    <button type="submit">Add Game</button>\n  </form>\n    </section>\n  ',document.getElementById("game-img").addEventListener("change",(function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(e){var t=document.getElementById("display-image");t.src=e.target.result,t.style.display="block",document.getElementById("image-label").style.display="none",document.getElementById("game-form").style.maxWidth="440px"},n.readAsDataURL(t)}})),document.getElementById("display-image").addEventListener("click",(function(){document.getElementById("game-img").value="",this.style.display="none",document.getElementById("image-label").style.display="flex",document.getElementById("game-form").style.maxWidth="400px"})),document.getElementById("game-form").addEventListener("submit",function(){var e,t=(e=qp().mark((function e(t){var n,r,i,s,o;return qp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=document.getElementById("game-title").value,r=document.getElementById("game-desc").value,i=document.getElementById("game-img").files[0],!(n&&r&&i)){e.next=17;break}return s=So(kp,"game_images/"+i.name),e.next=8,To(s,i);case 8:return e.next=10,xo(s);case 10:return o=e.sent,e.next=13,Ip(xf(Cp,"Games"),{gameTitle:n,gameDesc:r,gameImg:o});case 13:alert("Game added successfully!"),window.location.href="#/home",e.next=18;break;case 17:alert("Please fill in all fields and upload an image.");case 18:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){zp(s,r,i,o,a,"next",e)}function a(e){zp(s,r,i,o,a,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}())},"/details":function(e){document.getElementById("app").innerHTML='\n  <style> \n  * {\n  background-color: #262b3f;\n  font-family: \'Ubuntu\', sans-serif;\n}\n\n#review-form, .revCont, .game {\n  background-color: #1e2337;\n  width: 400px;\n  max-width: 440px; /* Allow up to 10% stretch */\n  height: auto; /* Let the height adjust based on content */\n  margin: 5em auto;\n  border-radius: 1.5em;\n  box-shadow: 0px 11px 35px 2px rgba(0, 0, 0, 0.14);\n  padding: 20px; /* Added padding to the form */\n  box-sizing: border-box; /* Ensure padding is included in the width and height */\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\nh1 {\n  background-color: transparent;\n  padding-top: 20px;\n  color: #663da6;\n  font-family: \'Ubuntu\', sans-serif;\n  font-weight: bold;\n  font-size: 23px;\n  text-align: center;\n}\n\nbutton {\n  cursor: pointer;\n  border-radius: 5em;\n  color: #fff;\n  background: #663da6;\n  border: 0;\n  padding-left: 40px;\n  padding-right: 40px;\n  padding-bottom: 10px;\n  padding-top: 10px;\n  font-family: \'Ubuntu\', sans-serif;\n  margin-top: 10px;\n  font-size: 13px;\n  box-shadow: 0 0 20px 1px rgba(0, 0, 0, 0.04);\n}\n\n.profile-pic {\n  display: block;\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin: 1px auto;\n  cursor: pointer;\n}\n\n@media (max-width: 600px) {\n  #game-form {\n    width: 90%;\n    max-width: 100%; /* Remove the max-width constraint on small screens */\n    border-radius: 0;\n  }\n}\n\n.image-upload {\n  position: relative;\n  border-radius: 20px;\n  width: 76%;\n  margin: 20px 0; /* Reduced margin to fit better in the form */\n}\n\n#image-label {\n  display: block;\n  width: 100%;\n  height: 200px;\n  background: rgba(136, 126, 126, 0.04);\n  border: 2px solid rgba(0, 0, 0, 0.02);\n  border-radius: 20px;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 700;\n  font-size: 14px;\n  color: #fff;\n  letter-spacing: 1px;\n  text-align: center;\n}\n\n#display-image {\n  width: 100%;\n  height: 100%;\n  border-radius: 20px;\n  object-fit: cover;\n}\n  .revCont h2 {\n    background-color: transparent;\n  padding-top: 20px;\n  color: #663da6;\n  font-family: \'Ubuntu\', sans-serif;\n  font-weight: bold;\n  font-size: 23px;\n  text-align: center;\n  }\n\n  #review-desc, \n  #review-rating,\n  #game-desc, \n  .revCont {\n  width: 76%;\n  color: #fff;\n  font-weight: 700;\n  font-size: 14px;\n  letter-spacing: 1px;\n  background: rgba(136, 126, 126, 0.04);\n  padding: 10px 20px;\n  border: none;\n  border-radius: 20px;\n  outline: none;\n  box-sizing: border-box;\n  border: 2px solid rgba(0, 0, 0, 0.02);\n  margin-bottom: 15px;\n  text-align: center;\n  font-family: \'Ubuntu\', sans-serif;\n  }\n  </style>\n    <header>\n      <div class="game">\n        <h1 id="game-title"></h1>\n        <img id="game-img" alt="Game Image" />\n        <p id="game-desc"></p>\n      </div>\n    </header>\n    <section>\n      <div class="revCont">\n        <h2>Reviews</h2>\n        <div class="reviews"></div>\n      </div>\n      <form id="review-form">\n        <textarea id="review-desc" placeholder="Write your review"></textarea>\n        <input type="number" id="review-rating" min="1" max="5" placeholder="Rating (1-5)" />\n        <button type="submit">Submit Review</button>\n      </form>\n    </section>\n  ';var t=new URLSearchParams(e).get("id");t&&(function(e){Wp.apply(this,arguments)}(t),document.getElementById("review-form").addEventListener("submit",(function(e){e.preventDefault();var n=document.getElementById("review-desc").value,r=document.getElementById("review-rating").value;!function(e,t,n){Zp.apply(this,arguments)}(t,n,r)})))}};function sg(){var e=ng((window.location.hash.slice(1)||"/").split("?"),2),t=e[0],n=e[1],r=ig[t];r?r(null==n?void 0:n.split("&").reduce((function(e,t){var n=ng(t.split("="),2),r=n[0],i=n[1];return e[r]=i,e}),{})):ig["/"]()}window.addEventListener("hashchange",sg),window.addEventListener("load",sg),document.addEventListener("DOMContentLoaded",(function(){sg()}))})();